<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <!--
     Copyright 2007-2009 The Kuali Foundation

     Licensed under the Educational Community License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

     http://www.opensource.org/licenses/ecl2.php

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
    -->

    <!-- Single Plan Item View -->

    <bean id="SingleTerm-InquiryView" p:viewName="SingleTerm-InquiryView" parent="MyPlanInquiryView">
        <property name="dataObjectClassName" value="org.kuali.student.myplan.plan.dataobject.PlannedTerm"/>
        <property name="viewHelperServiceClass"
                  value="org.kuali.student.myplan.plan.service.SingleQuarterInquiryHelperImpl"/>
        <property name="entryPageId" value="term_planned_courses_detail_page"/>
        <property name="additionalScriptFiles">
            <list>
                <value>themes/ksap/scripts/ksap.sbcalendar.js?@{#ConfigProperties['myplan.version']}</value>
            </list>
        </property>
        <property name="headerText" value="@{dataObject.qtrYear}"/>
        <property name="dataAttributes">
            <map>
                <entry key="planned-activities" value="@{dataObject.plannedActivities}"/>
            </map>
        </property>
        <property name="navigation">
            <bean parent="Uif-NavigationGroupBase">
                <property name="items">
                    <list>
                        <bean parent="Uif-Link" p:linkText="Your Academic Year">
                            <property name="href" value="plan?methodToCall=start&amp;viewId=PlannedCourses-FormView&amp;focusAtpId=@{dataObject.atpId}"/>
                            <property name="cssClasses" value="secondaryNavigation__year printDisplay"/>
                        </bean>
                        <bean parent="Uif-Link" p:linkText="@{T(org.kuali.student.myplan.plan.util.AtpHelper).formatQuarterLabel(dataObject.atpId)}">
                            <property name="href" value="inquiry?methodToCall=start&amp;viewId=SingleTerm-InquiryView&amp;term_atp_id=@{dataObject.atpId}"/>
                            <property name="cssClasses" value="secondaryNavigation__term active printDisplay"/>
                        </bean>
                        <bean parent="Uif-Link" p:linkText="Build Your Schedule">
                            <property name="href" value="sb?methodToCall=start&amp;viewId=ScheduleBuild-FormView&amp;termId=@{dataObject.atpId}&amp;requestedLearningPlanId=@{dataObject.learningPlanId}&amp;pageId=schedule_build"/>
                            <property name="cssClasses" value="secondaryNavigation__schedule printDisplay"/>
                            <property name="additionalCssClasses" value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).isAtpPublished(dataObject.atpId) OR dataObject.learningPlanId EQ null ? 'disabled' : ''}"/>
                            <property name="render" value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser()}"/>
                            <property name="onClickScript" value="if(jQuery(this).hasClass('disabled')){ e.preventDefault(); }"/>
                        </bean>
                    </list>
                </property>
            </bean>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-PageHorizontalLayout" id="term_planned_courses_detail_page" p:id="term_planned_courses_detail_page">
                    <property name="onDocumentReadyScript" value="
                        jQuery('body').on('SAVED_SCHEDULE_REMOVE', function(event, data) {
                            parent.jQuery.fancybox.close(true);
                            fnCloseAllPopups();
                        });
                    "/>
                    <property name="items">
                        <list>
                            <bean id="term_items" parent="KSAP-VerticalBoxGroup" p:width="710px">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="planNavigation">
                                            <property name="items">
                                                <list>
                                                    <bean parent="KSAP-HorizontalBoxGroup"
                                                          p:cssClasses="planNavigation__buttonGroup planNavigation__buttonGroup--term printDisplay">
                                                        <property name="items">
                                                            <list>
                                                                <bean id="sqv_previous_term_button" parent="Uif-Link" p:title="Previous Quarter">
                                                                    <property name="linkText"
                                                                              value="&lt;img src=&quot;../themes/ksap/images/pixel.gif&quot; class=&quot;planNavigation__image&quot; /&gt;"/>
                                                                    <property name="href"
                                                                              value="inquiry?methodToCall=start&amp;viewId=SingleTerm-InquiryView&amp;term_atp_id=@{T(org.kuali.student.myplan.plan.util.AtpHelper).getPreviousAtpId(dataObject.atpId)}"/>
                                                                    <property name="cssClasses"
                                                                              value="btn btn-secondary planNavigation__button planNavigation__button--previous"/>
                                                                    <property name="additionalCssClasses" value="@{T(org.kuali.student.myplan.plan.util.AtpHelper).getPreviousAtpId(dataObject.atpId) EQ null ? 'disabled':''}"/>
                                                                    <property name="propertyReplacers">
                                                                        <list>
                                                                            <bean parent="Uif-ConditionalBeanPropertyReplacer"
                                                                                  p:propertyName="href"
                                                                                  p:condition="T(org.kuali.student.myplan.plan.util.AtpHelper).getPreviousAtpId(dataObject.atpId) EQ null">
                                                                                <property name="replacement" value="#"/>
                                                                            </bean>
                                                                            <bean parent="Uif-ConditionalBeanPropertyReplacer"
                                                                                  p:propertyName="onClickScript"
                                                                                  p:condition="T(org.kuali.student.myplan.plan.util.AtpHelper).getPreviousAtpId(dataObject.atpId) EQ null">
                                                                                <property name="replacement" value="e.preventDefault();"/>
                                                                            </bean>
                                                                        </list>
                                                                    </property>
                                                                </bean>
                                                                <bean id="sqv_next_term_button" parent="Uif-Link" p:title="Next Quarter">
                                                                    <property name="linkText"
                                                                              value="&lt;img src=&quot;../themes/ksap/images/pixel.gif&quot; class=&quot;planNavigation__image&quot; /&gt;"/>
                                                                    <property name="href" value="inquiry?methodToCall=start&amp;viewId=SingleTerm-InquiryView&amp;term_atp_id=@{T(org.kuali.student.myplan.plan.util.AtpHelper).getNextAtpId(dataObject.atpId)}"/>
                                                                    <property name="cssClasses"
                                                                              value="btn btn-secondary planNavigation__button planNavigation__button--next"/>
                                                                    <property name="additionalCssClasses" value="@{T(org.kuali.student.myplan.plan.util.AtpHelper).getNextAtpId(dataObject.atpId) EQ null ? 'disabled':''}"/>
                                                                    <property name="propertyReplacers">
                                                                        <list>
                                                                            <bean parent="Uif-ConditionalBeanPropertyReplacer"
                                                                                  p:propertyName="href"
                                                                                  p:condition="T(org.kuali.student.myplan.plan.util.AtpHelper).getNextAtpId(dataObject.atpId) EQ null">
                                                                                <property name="replacement" value="#"/>
                                                                            </bean>
                                                                            <bean parent="Uif-ConditionalBeanPropertyReplacer"
                                                                                  p:propertyName="onClickScript"
                                                                                  p:condition="T(org.kuali.student.myplan.plan.util.AtpHelper).getNextAtpId(dataObject.atpId) EQ null">
                                                                                <property name="replacement" value="e.preventDefault();"/>
                                                                            </bean>
                                                                        </list>
                                                                    </property>
                                                                </bean>
                                                            </list>
                                                        </property>
                                                    </bean>
                                                    <bean parent="KSAP-HeaderTwo" p:headerText="@{T(org.kuali.student.myplan.plan.util.AtpHelper).formatQuarterLabel(dataObject.atpId)}"
                                                          p:cssClasses="planNavigation__header"/>
                                                    <bean parent="overallPlanLink"/>
                                                </list>
                                            </property>
                                        </bean>

                                        <bean parent="KSAP-Message" p:cssClasses="block printDisplay">
                                            <property name="messageText"
                                                      value="View your courses and add or delete scheduled sections from your [0]. MyPlan allows you to create an academic plan, but does not currently check your eligibility for planned courses or sections. To prepare for registration, [1]."/>
                                            <property name="inlineComponents">
                                                <list>
                                                    <bean parent="Uif-Link" p:linkText="plan" p:href="plan?methodToCall=start&amp;viewId=PlannedCourses-FormView&amp;focusAtpId=@{dataObject.atpId}"/>
                                                    <bean parent="Uif-Link" p:linkText="build your schedule">
                                                        <property name="href" value="sb?methodToCall=start&amp;viewId=ScheduleBuild-FormView&amp;termId=@{dataObject.atpId}&amp;requestedLearningPlanId=@{dataObject.learningPlanId}&amp;pageId=schedule_build"/>
                                                    </bean>
                                                </list>
                                            </property>
                                            <property name="propertyReplacers">
                                                <list>
                                                    <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="inlineComponents" p:condition="T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() OR !T(org.kuali.student.myplan.plan.util.AtpHelper).isAtpPublished(dataObject.atpId) OR dataObject.learningPlanId EQ null">
                                                        <property name="replacement">
                                                            <list>
                                                                <bean parent="Uif-Link" p:linkText="plan" p:href="plan?methodToCall=start&amp;viewId=PlannedCourses-FormView&amp;focusAtpId=@{dataObject.atpId}"/>
                                                                <bean parent="KSAP-Message" p:messageText="build your schedule"/>
                                                            </list>
                                                        </property>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                        <ref bean="term_collection_data"/>
                                        <bean p:id="schedule_build_termId" parent="KSAP-SimpleInputField" p:propertyName="atpId" p:readOnly="false">
                                            <property name="hidden" value="true"/>
                                            <property name="control">
                                                <bean parent="Uif-HiddenControl"/>
                                            </property>
                                        </bean>
                                        <bean p:id="schedule_build_learningPlanId" parent="KSAP-SimpleInputField"
                                              p:propertyName="learningPlanId" p:readOnly="false">
                                            <property name="hidden" value="true"/>
                                            <property name="control">
                                                <bean parent="Uif-HiddenControl"/>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-VerticalBoxGroup" p:hidden="true">
                                            <property name="items">
                                                <list>
                                                    <bean parent="sb_error_max_pinned"/>
                                                    <bean parent="sb_confirm_remove_pinned"/>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-RightPane" p:width="230px">
                                <property name="cssClasses" value="printDisplay"/>
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-ModuleContainer" p:headerText="Pinned Schedules" p:render="@{dataObject.openForPlanning AND dataObject.publishedTerm AND dataObject.pinnedSchedulesExists}">
                                            <property name="additionalCssClasses" value="noClick scheduleSaved--termView"/>
                                            <property name="header.rightGroup">
                                                <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="moduleContainer__header--right">
                                                    <property name="items">
                                                        <list>
                                                            <bean parent="schedule_builder_pinned_sqv_help_icon"/>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                            <property name="items">
                                                <list>
                                                    <bean parent="KSAP-SavedScheduleList"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-ModuleContainer" p:headerText="Messages">
                                            <property name="items">
                                                <list>
                                                    <bean parent="KSAP-MessagesList"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-YourStuff"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="term_collection_data" parent="KSAP-VerticalBoxGroup">
        <property name="onDocumentReadyScript" value="
            jQuery('a.lightBoxLink').each(function() {
                createLightBoxLink(jQuery(this).attr('id'), {helpers:{overlay:{closeClick:false}},autoScale:true,centerOnScroll:true,transitionIn:'fade',transitionOut:'fade',speedIn:200,speedOut:200,type:'iframe'}, false);
            });
            jQuery('body').on('SECTION_ITEM_ADDED', function(event, data) {
                toggleSectionAction('button_' + data.atpId + '_' + data.RegistrationCode, data.RegistrationCode, 'added', data);
                if (data.ItemsToUpdate &amp;&amp; data.Primary == 'false') {
                    var items = data.ItemsToUpdate.split(',');
                    jQuery.each(items, function (index, value) {
                        toggleSectionAction('button_' + data.atpId + '_' + items[index], items[index], 'added', data, true);
                    });
                }
            }).on('SECTION_ITEM_DELETED', function(event, data) {
                if (jQuery('#' + 'button_' + data.atpId + '_' + data.RegistrationCode).data('initial') || data.ActivityStateKey == 'withdrawn') {
                    removeSectionRow('button_' + data.atpId + '_' + data.RegistrationCode);
                    if (data.ItemsToUpdate) {
                        var items = data.ItemsToUpdate.split(',');
                        jQuery.each(items, function (index, value) {
                            removeSectionRow('button_' + data.atpId + '_' + items[index]);
                        });
                    }
                } else {
                    var action = 'deleted';
                    if (data.ActivityStateKey == 'suspended') action = data.ActivityStateKey;
                    toggleSectionAction('button_' + data.atpId + '_' + data.RegistrationCode, data.RegistrationCode, action, data);
                    if (data.ItemsToUpdate) {
                        var items = data.ItemsToUpdate.split(',');
                        jQuery.each(items, function (index, value) {
                            toggleSectionAction('button_' + data.atpId + '_' + items[index], items[index], action, data);
                        });
                    }
                }
            }).on('UPDATE_NEW_TERM_TOTAL_CREDITS', function(event, data) {
                if (data.atpId == '@{dataObject.atpId}') {
                    fnUpdateQuarterViewCredits(data.totalCredits);
                }
            }).on('PLAN_ITEM_ADDED PLAN_ITEM_DELETED RECOMMENDED_ITEM_UPDATED', function(event, data) {
                if (data.atpId == '@{dataObject.atpId}' &amp;&amp; data.planItemType != 'wishlist') {
                    customRetrieveComponent(data.atpId + '_' + data.planItemType, data.atpId + '_' + data.planItemType, 'start', 'inquiry', {viewId:'SingleTerm-InquiryView', term_atp_id:'@{dataObject.atpId}'}, null, {css:{top:'1px',left:'1px',border:'none',background:'none'},overlayCSS:{backgroundColor: '#fff',opacity: 0.5}});
                }
            }).on('PLAN_ITEM_UPDATED', function(event, data) {
                updateNote(data);
            });
        "/>
        <property name="cssClasses" value="planTerm"/>
        <property name="layoutManager.cssClasses" value="planTerm__container"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv" p:headerText="@{dataObject.qtrYear}" p:headerTagCssClasses="planTerm__headerText">
                <property name="cssClasses">
                    <list merge="false">
                        <value>planTerm__header</value>
                        <value>@{dataObject.completedTerm ? 'planTerm__header--past' : (dataObject.currentTermForView ?
                            'planTerm__header--current' : 'planTerm__header--future')}
                        </value>
                    </list>
                </property>
            </bean>
        </property>
        <property name="items">
            <list>
                <!-- Past quarter academic record with no courses -->
                <bean parent="academicRecordCoursesList_Empty"/>
                <!-- Past quarter academic record with at least one course -->
                <bean parent="academicRecordCoursesList_Completed"/>
                <!-- Current quarter but closed for planning with at least one course-->
                <bean parent="academicRecordCoursesList_RegistrationClosed"/>
                <!-- Current and Future quarter academic record with at least one course and which are open for planning -->
                <bean parent="academicRecordCoursesList"/>
                <!-- Plan Items lists -->
                <bean parent="plannedItemsList"/>
                <bean parent="recommendedItemsList"/>
                <bean parent="backupItemsList"/>
            </list>
        </property>
    </bean>

    <bean id="plannedItemsList" parent="KSAP-VerticalBoxGroup">
        <property name="id" value="@{dataObject.atpId}_planned"/>
        <property name="cssClasses" value="removeMargin"/>
        <property name="items">
            <list>
                <!-- Plan list NOT empty-->
                <bean parent="termPlannedItems"/>
            </list>
        </property>
        <property name="propertyReplacers">
            <list>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items"
                      p:condition="dataObject.plannedList.size() EQ 0 AND (dataObject.completedTerm OR !dataObject.openForPlanning)">
                    <property name="replacement">
                        <list>
                            <!-- Plan list is empty -->
                            <bean parent="termPlannedItems_Empty"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="recommendedItemsList" parent="KSAP-VerticalBoxGroup">
        <property name="id" value="@{dataObject.atpId}_recommended"/>
        <property name="cssClasses" value="removeMargin"/>
        <property name="items">
            <list>
                <!-- Backup list NOT empty-->
                <bean parent="termRecommendedItems"/>
            </list>
        </property>
    </bean>

    <bean id="backupItemsList" parent="KSAP-VerticalBoxGroup">
        <property name="id" value="@{dataObject.atpId}_backup"/>
        <property name="cssClasses" value="removeMargin"/>
        <property name="items">
            <list>
                <!-- Backup list NOT empty-->
                <bean parent="termBackupItems"/>
            </list>
        </property>
        <property name="propertyReplacers">
            <list>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items"
                      p:condition="dataObject.backupList.size() EQ 0 AND (dataObject.completedTerm OR !dataObject.openForPlanning)">
                    <property name="replacement">
                        <list>
                            <!-- Backup list is empty -->
                            <bean parent="termBackupItems_Empty"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="academicRecordCoursesList_Completed" parent="course_details_activity_data"
          p:headerText="Completed Courses">
        <property name="render" value="@{dataObject.academicRecord.size() gt 0 AND dataObject.completedTerm}"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.plan.dataobject.AcademicRecordDataObject"/>
        <property name="propertyName" value="academicRecord"/>
        <property name="id" value="@{dataObject.atpId}_completed"/>
        <property name="onDocumentReadyScript" value="
            var tableHead = jQuery('table#@{dataObject.atpId} thead');
            tableHead.before('
                &lt;col style=&quot;width: 568px;&quot;&gt;
                &lt;col style=&quot;width: 70px;&quot;&gt;
                &lt;col style=&quot;width: 70px;&quot;&gt;
            ');
            jQuery('table#@{dataObject.atpId} tfoot').remove();
            truncateField('@{dataObject.atpId}_completed');
        "/>
        <property name="cssClasses" value="removeMargin"/>
        <!--<property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>-->
        <property name="layoutManager.numberOfColumns" value="3"/>
        <property name="layoutManager.id" value="@{dataObject.atpId}"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv" p:cssClasses="planContainer__header planTerm--locked"
                  p:headerTagCssClasses="planContainer__headerText"/>
        </property>
        <property name="header.rightGroup">
            <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="planContainer__headerGroup--right">
                <property name="items">
                    <list>
                        <bean parent="single_quarter_completed_help_icon"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="header.lowerGroup">
            <bean parent="KSAP-VerticalBoxGroup"/>
        </property>
        <property name="header.lowerGroup.render" value="false"/>
        <property name="items">
            <list>
                <bean parent="KSAP-HorizontalFieldGroup" p:width="562px">
                    <property name="fieldLabel.render" value="true"/>
                    <property name="label" value="Courses"/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-SimpleDataField" p:propertyName="courseCode"/>
                            <bean parent="Uif-Link" p:linkText="@{#line.courseTitle}"
                                  p:render="@{#line.courseId NE ''}">
                                <property name="href"
                                          value="inquiry?methodToCall=start&amp;viewId=CourseDetails-InquiryView&amp;courseId=@{#line.courseId}&amp;courseCd=@{#line.courseCode NE null ? #line.courseCode.replace('&amp;','%26') : #line.courseCode}"/>
                                <property name="cssClasses" value="ellipsisItem"/>
                            </bean>
                        </list>
                    </property>
                </bean>

                <bean parent="KSAP-SimpleDataField" p:propertyName="credit" p:width="63px">
                    <property name="fieldLabel.render" value="true"/>
                    <property name="label" value="Credits"/>
                    <property name="cssClasses" value="center"/>
                </bean>

                <bean parent="KSAP-SimpleDataField" p:propertyName="grade" p:width="63px">
                    <property name="fieldLabel.render" value="true"/>
                    <property name="label" value="Grade"/>
                    <property name="cssClasses" value="center"/>
                </bean>

            </list>
        </property>
        <property name="propertyReplacers">
            <list></list>
        </property>
        <property name="footer">
            <bean parent="termCreditTotal"/>
        </property>
    </bean>

    <bean id="academicRecordCoursesList_RegistrationClosed" parent="academicRecordCoursesList_Completed"
          p:headerText="Registered Courses">
        <property name="render"
                  value="@{dataObject.academicRecord.size() gt 0 AND !dataObject.completedTerm AND !dataObject.openForPlanning}"/>
    </bean>

    <bean id="academicRecordCoursesList" parent="course_details_activity_data"
          p:headerText="Registered Courses">
        <property name="render"
                  value="@{dataObject.academicRecord.size() gt 0 AND !dataObject.completedTerm AND dataObject.openForPlanning}"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.plan.dataobject.AcademicRecordDataObject"/>
        <property name="propertyName" value="academicRecord"/>
        <property name="cssClasses" value="removeMargin"/>
        <property name="onDocumentReadyScript" value="
            var table = jQuery('table#academicRecord_@{dataObject.atpId}');
            var tableHead = table.find('thead');
            tableHead.find('tr:gt(0)').remove();
            tableHead.find('tr th').last().attr('colspan', '2').prev('th').attr('colspan', '2');
            tableHead.before('
                &lt;col style=&quot;width: 22px;&quot;&gt;
                &lt;col style=&quot;width: 157px;&quot;&gt;
                &lt;col style=&quot;width: 87px;&quot;&gt;
                &lt;col style=&quot;width: 171px;&quot;&gt;
                &lt;col style=&quot;width: 90px;&quot;&gt;
                &lt;col style=&quot;width: 111px;&quot;&gt;
                &lt;col style=&quot;width: 70px;&quot;&gt;
            ');
            table.find('.courseActivities__meetingData, .courseActivities__instructor, .courseActivities__other').parents('td').each(function() {
                jQuery(this).attr('colspan', '2');
            });
            table.find('.courseActivities__additionalDetails').parents('td').each(function() {
                jQuery(this).attr('colspan', '3');
            });
            table.find('.courseActivities__regCode').parents('td').each(function() {
                jQuery(this).attr('colspan', '1');
            });
            table.find('.courseActivities__additionalDetails').parents('tr').each(function() {
                jQuery(this).addClass('collapsible').hide();
            });
        "/>
        <property name="width" value="708px"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv" p:cssClasses="planContainer__header planTerm--unlocked"
                  p:headerTagCssClasses="planContainer__headerText"/>
        </property>
        <property name="header.rightGroup">
            <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="planContainer__headerGroup--right">
                <property name="items">
                    <list>
                        <bean parent="single_quarter_registered_help_icon"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="header.lowerGroup">
            <bean parent="KSAP-VerticalBoxGroup"/>
        </property>
        <property name="header.lowerGroup.render" value="false"/>
        <property name="layoutManager.numberOfColumns" value="5"/>
        <property name="layoutManager.id" value="academicRecord_@{dataObject.atpId}"/>
        <property name="layoutManager.cssClasses" value="courseActivities__table courseActivities__table--registered"/>
        <property name="items">
            <list>
                <bean parent="Uif-ImageField" p:render="@{#line.activityOfferingItem ne null}" p:valign="TOP"
                      p:colSpan="1" p:rowSpan="1">
                    <property name="id" value="button_@{#line.uuid}"/>
                    <property name="source"
                              value="@{#ConfigProperties['ks.myplan.externalizable.images.url']}/pixel.gif"/>
                    <property name="onClickScript"
                              value="toggleRegisteredDetails(jQuery('#button_@{#line.uuid}').parents('tr'), jQuery(this))"/>
                    <property name="cssClasses" value="courseActivities__toggle"/>
                    <property name="onDocumentReadyScript" value="
                        var row = jQuery('#button_@{#line.uuid}').parents('tr');
                        if (@{#line.activityOfferingItem.primary}) {
                            row.addClass('courseActivities--primary');
                        } else {
                            row.addClass('courseActivities--secondary');
                        }
                    "/>
                </bean>
                <bean parent="KSAP-VerticalFieldGroup" p:render="@{#line.activityOfferingItem ne null}" p:colSpan="1"
                      p:rowSpan="1">
                    <property name="fieldLabel.render" value="true"/>
                    <property name="label" value="Section"/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-MessageField" p:messageText="@{#line.courseCode} @{#line.activityCode}">
                                <property name="cssClasses" value="courseActivities__code"/>
                            </bean>
                            <bean parent="Uif-Link" p:linkText="@{#line.courseTitle}">
                                <property name="href"
                                          value="inquiry?methodToCall=start&amp;viewId=CourseDetails-InquiryView&amp;courseId=@{#line.courseId}&amp;courseCd=@{#line.courseCode NE null ? #line.courseCode.replace('&amp;','%26') : #line.courseCode}"/>
                                <property name="cssClasses" value="courseActivities__title ellipsisItem removeMargin"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="KSAP-VerticalFieldGroup" p:render="@{#line.activityOfferingItem ne null}" p:colSpan="1"
                      p:rowSpan="1">
                    <property name="fieldLabel.render" value="true"/>
                    <property name="label" value="Type"/>
                    <property name="cssClasses" value="capitalize center"/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-SimpleDataField"
                                  p:propertyName="activityOfferingItem.activityOfferingType">
                            </bean>
                            <bean parent="KSAP-MessageField" p:messageText="(@{#line.credit})"
                                  p:render="@{#line.activityOfferingItem.primary}">
                                <property name="cssClasses" value="removeMargin"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="activityMeetingData" p:render="@{#line.activityOfferingItem ne null}" p:colSpan="1"
                      p:rowSpan="1">
                    <property name="propertyName" value="activityOfferingItem.activityItem"/>
                </bean>
                <bean parent="KSAP-SimpleDataField" p:render="@{#line.activityOfferingItem ne null}" p:colSpan="1"
                      p:rowSpan="1">
                    <property name="propertyName" value="activityOfferingItem.instructor"/>
                    <property name="fieldLabel.render" value="true"/>
                    <property name="label" value="Instructor"/>
                    <property name="cssClasses" value="courseActivities__instructor"/>
                </bean>
                <bean parent="KSAP-HorizontalFieldGroup" p:render="@{#line.activityOfferingItem ne null}" p:valign="TOP"
                      p:colSpan="1" p:rowSpan="1">
                    <property name="cssClasses" value="courseActivities__additionalDetails"/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-NoSpanMessage"
                                  p:messageText="@{#line.activityOfferingItem.summerTerm}&lt;br/&gt;"
                                  p:render="@{#line.activityOfferingItem.summerTerm ne null}"/>
                            <bean parent="KSAP-NoSpanMessage"
                                  p:messageText="@{#line.activityOfferingItem.sectionComments}"
                                    />
                            <bean parent="current_section_status"
                                  p:linkText="@{#line.activityOfferingItem.details}">
                                <property name="href"
                                          value="https://sdb.admin.washington.edu/timeschd/uwnetid/sln.asp?QTRYR=@{#line.activityOfferingItem.qtryr}&amp;SLN=@{#line.activityOfferingItem.registrationCode}"/>
                                <property name="cssClasses" value="lightBoxLink"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="KSAP-VerticalFieldGroup" p:render="@{#line.activityOfferingItem ne null}" p:valign="TOP"
                      p:colSpan="1" p:rowSpan="1">
                    <property name="cssClasses" value="courseActivities__other"/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-NoSpanMessage"
                                  p:messageText="@{#line.activityOfferingItem.gradingOption}"
                                  p:render="@{#line.activityOfferingItem.gradingOption ne null}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="Distance learning"
                                  p:render="@{#line.activityOfferingItem.distanceLearning}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="Honors"
                                  p:render="@{#line.activityOfferingItem.honorsSection}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="Jointly offered"
                                  p:render="@{#line.activityOfferingItem.jointOffering}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="Research"
                                  p:render="@{#line.activityOfferingItem.research}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="Writing"
                                  p:render="@{#line.activityOfferingItem.writingSection}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="Service learning"
                                  p:render="@{#line.activityOfferingItem.serviceLearning}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="New course"
                                  p:render="@{#line.activityOfferingItem.newThisYear}"/>
                            <bean parent="KSAP-NoSpanMessage"
                                  p:messageText="May not be eligible for Financial Aid"
                                  p:render="@{#line.activityOfferingItem.ineligibleForFinancialAid}"/>
                            <bean parent="KSAP-NoSpanMessage"
                                  p:messageText="Course Fee $@{#line.activityOfferingItem.feeAmount}"
                                  p:render="@{#line.activityOfferingItem.feeAmount ne null}"/>
                            <bean parent="KSAP-NoSpanMessage" p:messageText="--"
                                  p:render="@{#line.activityOfferingItem.gradingOption eq null AND
                                             !#line.activityOfferingItem.distanceLearning AND
                                             !#line.activityOfferingItem.honorsSection AND
                                             !#line.activityOfferingItem.jointOffering AND
                                             !#line.activityOfferingItem.research AND
                                             !#line.activityOfferingItem.writingSection AND
                                             !#line.activityOfferingItem.serviceLearning AND
                                             !#line.activityOfferingItem.newThisYear AND
                                             !#line.activityOfferingItem.ineligibleForFinancialAid AND
                                             #line.activityOfferingItem.feeAmount eq null AND
                                             !#line.activityOfferingItem.independentStudy}"/>
                        </list>
                    </property>
                </bean>
                <bean parent="KSAP-HorizontalFieldGroup" p:render="@{#line.activityOfferingItem ne null}" p:valign="TOP"
                      p:colSpan="3" p:rowSpan="1">
                    <property name="cssClasses" value="courseActivities__regCode"/>
                    <property name="items">
                        <list>
                            <bean parent="current_section_status"
                                  p:linkText="@{#line.activityOfferingItem.registrationCode}">
                                <property name="href"
                                          value="https://sdb.admin.washington.edu/timeschd/uwnetid/sln.asp?QTRYR=@{#line.activityOfferingItem.qtryr}&amp;SLN=@{#line.activityOfferingItem.registrationCode}"/>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="propertyReplacers">
            <list/>
        </property>
    </bean>

    <bean id="termPlannedItems" parent="KSAP-StackedCollectionGroup" p:headerText="Planned Courses">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.plan.dataobject.PlannedCourseDataObject"/>
        <property name="propertyName" value="plannedList"/>
        <property name="onDocumentReadyScript"
                  value="truncateField('@{dataObject.atpId}_planned', true);"/>
        <property name="cssClasses" value="planContainer--planned"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv" p:cssClasses="planContainer__header"
                  p:headerTagCssClasses="planContainer__headerText"/>
        </property>
        <property name="header.rightGroup">
            <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="planContainer__headerGroup--right">
                <property name="items">
                    <list>
                        <bean parent="single_quarter_planned_help_icon"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="instructionalMessage">
            <bean parent="KSAP-Message" p:messageText="[0]" p:cssClasses="planTerm__add @{dataObject.plannedList.size() EQ 0 ? 'planTerm__add--empty':''}" p:render="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND dataObject.openForPlanning}">
                <property name="inlineComponents">
                    <list>
                        <bean parent="Uif-ActionLink" p:actionLabel="Add course or placeholder" p:actionScript="
                            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', atpId:@{dataObject.atpId}, backup:false, pageId:'plan_item_add_page'};
                            openPopup('plan_item_add_page', retrieveData, 'plan', {width:'300px', height:'16px'}, {tail:{hidden:true}, position:'right', align:'middle', close:true}, e);
                        " p:render="@{!dataObject.completedTerm AND dataObject.openForPlanning AND dataObject.plannedList.size() LT 8}"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="layoutManager.lineGroupPrototype.id" value="@{#line.planItemDataObject.id}"/>
        <property name="layoutManager.lineGroupPrototype.cssClasses"
                  value="planTerm__item @{#line.placeHolder ? 'planTerm__item--placeholder':''} @{#line.planItemDataObject.type EQ 'recommended' ? (!#line.proposed ? 'planTerm__item--recommendedAccepted':'planTerm__item--recommendedProposed') : (#line.adviserRecommended ? 'planTerm__item--recommendedAccepted':'')}"/>
        <property name="items">
            <list>
                <bean parent="termPlanItemGroup"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="activityOfferingTableCollection"/>
            </list>
        </property>
        <property name="footer">
            <bean parent="termCreditTotal"/>
        </property>
        <property name="footer.render" value="@{!dataObject.completedTerm AND dataObject.openForPlanning}"/>
    </bean>

    <bean id="termRecommendedItems" parent="termPlannedItems" p:headerText="Recommended Courses">
        <property name="propertyName" value="recommendedList"/>
        <property name="instructionalMessage">
            <bean parent="KSAP-Message" p:messageText="[0]" p:cssClasses="planTerm__add @{dataObject.recommendedList.size() EQ 0 ? 'planTerm__add--empty':''}" p:render="@{T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND dataObject.openForPlanning}">
                <property name="inlineComponents">
                    <list>
                        <bean parent="Uif-ActionLink" p:actionLabel="Recommend" p:actionScript="
                            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', atpId:@{dataObject.atpId}, backup:false, pageId:'recommended_add_page'};
                            openPopup('recommended_add_page', retrieveData, 'plan', {width:'300px', height:'16px'}, {tail:{hidden:true}, position:'right', align:'middle', close:true}, e);
                        " p:render="@{!dataObject.completedTerm AND dataObject.openForPlanning AND dataObject.plannedList.size() LT 8}"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="render" value="@{dataObject.recommendedList.size() gt 0}"/>
        <property name="onDocumentReadyScript"
                  value="truncateField('@{dataObject.atpId}_recommended', true);"/>
        <property name="cssClasses" value="planContainer--recommended"/>
        <property name="header.rightGroup.items">
            <list>
                <bean parent="single_quarter_backup_help_icon"/>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="termRecommendedItemGroup"/>
            </list>
        </property>
        <property name="footer.render" value="false"/>
    </bean>

    <bean id="termBackupItems" parent="termPlannedItems" p:headerText="Backup Courses">
        <property name="propertyName" value="backupList"/>
        <property name="onDocumentReadyScript"
                  value="truncateField('@{dataObject.atpId}_backup', true);"/>
        <property name="instructionalMessage">
            <bean parent="KSAP-Message" p:messageText="[0]" p:cssClasses="planTerm__add @{dataObject.backupList.size() EQ 0 ? 'planTerm__add--empty':''}" p:render="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND dataObject.openForPlanning}">
                <property name="inlineComponents">
                    <list>
                        <bean parent="Uif-ActionLink" p:actionLabel="Add course or placeholder" p:actionScript="
                            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', atpId:@{dataObject.atpId}, backup:true, pageId:'plan_item_add_page'};
                            openPopup('plan_item_add_page', retrieveData, 'plan', {width:'300px', height:'16px'}, {tail:{hidden:true}, position:'right', align:'middle', close:true}, e);
                        " p:render="@{!dataObject.completedTerm AND dataObject.openForPlanning AND dataObject.backupList.size() LT 8}"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="cssClasses" value="planContainer--backup"/>
        <property name="header.rightGroup.items">
            <list>
                <bean parent="single_quarter_backup_help_icon"/>
            </list>
        </property>
        <property name="footer.render" value="false"/>
    </bean>

    <bean id="activityOfferingTableCollection" parent="course_details_activity_data">
        <property name="id"
                  value="@{#line.courseDetails.uiId}_sections_collection"/>
        <property name="headerText" value=""/>
        <property name="header">
            <bean parent="Uif-HeaderFour"/>
        </property>
        <property name="header.lowerGroup">
            <bean parent="KSAP-VerticalBoxGroup">
                <property name="items">
                    <list></list>
                </property>
            </bean>
        </property>
        <property name="header.lowerGroup.render" value="false"/>
        <property name="header.render" value="false"/>
        <property name="propertyName" value="planActivities"/>
        <property name="layoutManager.id" value="@{#line.courseDetails.courseId}_sections"/>
        <property name="onDocumentReadyScript" value="
            var selected = @{#line.planActivities.size()};
            var url =  '/'+'@{#ConfigProperties['app.code']}'+'/myplan/plan/enroll';
            if (selected &gt; 0) {
                getActivityEnrollment(url, {'courseId':'@{#line.courseDetails.courseId}', 'atpId':'@{dataObject.atpId}'}, '@{#line.courseDetails.uiId}_sections_collection');
                var table = jQuery('table#@{#line.courseDetails.courseId}_sections');
                var tableHead = table.find('thead');
                tableHead.before('
                    &lt;col style=&quot;width: 62px;&quot;&gt;
                    &lt;col style=&quot;width: 103px;&quot;&gt;
                    &lt;col style=&quot;width: 180px;&quot;&gt;
                    &lt;col style=&quot;width: 88px;&quot;&gt;
                    &lt;col style=&quot;width: 50px;&quot;&gt;
                    &lt;col style=&quot;width: 100px;&quot;&gt;
                    &lt;col style=&quot;width: 80px;&quot;&gt;
                    &lt;col style=&quot;width: 45px;&quot;&gt;
                ');
            }
        "/>
        <property name="items">
            <list>
                <bean parent="activityCode" p:rowSpan="3" p:valign="@{#line.stateKey EQ 'active' ? 'TOP':'MIDDLE'}">
                    <property name="items">
                        <list>
                            <bean parent="KSAP-SimpleDataField" p:propertyName="code" p:label="Section"
                                  p:id="@{#line.atpId}-@{#line.registrationCode}"
                                  p:cssClasses="courseActivities__code--secondary"/>
                            <bean parent="KSAP-Message">
                                <property name="messageText" value="PCE"/>
                                <property name="title" value="UW Professional &amp; Continuing Education"/>
                                <property name="render" value="@{#line.instituteCode.startsWith('95')}"/>
                                <property name="cssClasses" value="courseActivities__code--small"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="activityType"/>
                <bean parent="activityMeetingData"/>
                <bean parent="activityLocationData"/>
                <bean parent="activityRegCode"/>
                <bean parent="activityEnrlRestr"/>
                <bean parent="activityEnrlData" p:render="@{#line.stateKey EQ 'active'}"/>
                <bean parent="activityEnrlStatus" p:render="@{#line.stateKey NE 'active'}"/>
                <bean parent="KSAP-VerticalFieldGroup" p:valign="TOP" p:rowSpan="3" p:colSpan="1"
                      p:cssClasses="courseActivities__action">
                    <property name="items">
                        <list>
                            <bean parent="activityActionDelete"/>
                        </list>
                    </property>
                    <property name="propertyReplacers">
                        <list>
                            <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items"
                                  p:condition="T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser()">
                                <property name="replacement">
                                    <list>
                                        <bean parent="emptyAction"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="activityInstructor"/>
                <bean parent="activityOther"/>
                <bean parent="activityAdditionalDetails"/>
            </list>
        </property>
    </bean>

    <!-- Delete Button -->
    <bean id="activityActionDelete" parent="section_button">
        <property name="title" value="Delete"/>
        <property name="onClickScript" value="
            var additionalFormData = {
                methodToCall: 'removeItem',
                viewId: 'PlannedCourse-FormView',
                planItemId: '@{#line.planItemId}',
                sectionCode: '@{#line.code}',
                atpId: '@{#line.atpId}',
                instituteCode: '@{#line.instituteCode}',
                registrationCode: '@{#line.registrationCode}',
                primary: @{#line.primary},
                activityStateKey: '@{#line.stateKey}'
            };
            submitHiddenForm('plan', additionalFormData, false, e);
        "/>
        <property name="cssClasses" value="courseActivities__itemDelete"/>
        <property name="dataAttributes">
            <map merge="true">
                <entry key="initial" value="true"/>
                <entry key="courseid" value="@{#line.courseId}"/>
                <entry key="planned" value="@{#line.planItemId ne null}"/>
                <entry key="primary" value="@{#line.primary}"/>
                <entry key="coursesection" value="@{#line.code}"/>
                <entry key="primarysection" value="@{#line.primaryActivityOfferingCode}"/>
            </map>
        </property>
    </bean>

    <bean id="termStudentActions" parent="Uif-LinkGroup" p:groupBeginDelimiter="" p:groupEndDelimiter=""
          p:linkSeparator="|">
        <property name="cssClasses" value="termPlanItem__actions"/>
        <property name="validationMessages">
            <null/>
        </property>
    </bean>

    <bean id="termSectionsToggle"
          p:id="@{#line.courseDetails.uiId}_toggle"
          parent="Uif-ActionLink" p:cssClasses="inlineBlock"
          p:actionLabel="Show all scheduled sections">
        <property name="actionScript" value="
            jQuery('#@{#line.courseDetails.uiId}_sections_collection').css('min-height','18px');
            customRetrieveComponent('@{#line.courseDetails.uiId}_sections_collection','@{#line.courseDetails.uiId}_sections_collection','start','inquiry',{viewId:'CourseSections-InquiryView',section_term:'@{#line.planItemDataObject.atp}',courseId:'@{#line.courseDetails.courseId}',loadActivityOffering:'true', courseCd: '@{#line.courseDetails.code}'},null,{css:{border:'none',width:'16px',height:'16px',lineHeight:'16px',top:'1px',left:'1px'},overlayCSS:{backgroundColor:'#fff',opacity:'0.5'}});
            switchFetchAction('@{#line.courseDetails.uiId}_toggle', '@{#line.courseDetails.uiId}_sections_collection');
        "/>
        <property name="dataAttributes">
            <map merge="true">
                <entry key="hidden" value="true"/>
            </map>
        </property>
    </bean>

    <bean id="termMoveCourse" parent="Uif-ActionLink" p:id="@{#line.placeHolder ? #line.placeHolderCode.replace('&amp;','').replace(' ','') : #line.courseDetails.code.replace('&amp;','').replace(' ','')}_move_@{#index}" p:actionLabel="Move" p:cssClasses="inlineBlock">
        <property name="actionScript" value="
            var backupFlag = '@{#line.planItemDataObject.type}'=='backup';
            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', planItemId:'@{#line.planItemDataObject.id}', atpId:'@{#line.planItemDataObject.atp}', backup:backupFlag, pageId:'move_dialog_page'};
            var popupStyle = {width:'300px', height:'16px'};
            var popupOptions = {tail:{hidden:true}, position:'left', align:'middle', close:true};
            openPopup('move_dialog_page', retrieveData, 'plan', popupStyle, popupOptions, e);
        "/>
    </bean>

    <bean id="termCopyCourse" p:id="@{#line.placeHolder ? 'palceholder': #line.courseDetails.code.replace('&amp;','').replace(' ','')}_copy_@{#index}" parent="Uif-ActionLink" p:actionLabel="Copy" p:cssClasses="inlineBlock">
        <property name="actionScript" value="
            var backupFlag = '@{#line.planItemDataObject.type}'=='backup';
            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', planItemId:'@{#line.planItemDataObject.id}', atpId:'@{#line.planItemDataObject.atp}', backup:backupFlag, pageId:'copy_dialog_page'};
            var popupStyle = {width:'300px', height:'16px'};
            var popupOptions = {tail:{hidden:true}, position:'left', align:'middle', close:true};
            openPopup('copy_dialog_page', retrieveData, 'plan', popupStyle, popupOptions, e);
        "/>
    </bean>

    <bean id="termDeleteCourse" parent="Uif-ActionLink" p:id="@{#line.placeHolder ? #line.placeHolderCode.replace('&amp;','').replace(' ','') : #line.courseDetails.code.replace('&amp;','').replace(' ','')}_delete_@{#index}" p:actionLabel="Delete" p:cssClasses="inlineBlock">
        <property name="actionScript" value="
            var backupFlag = '@{#line.planItemDataObject.type}'=='backup';
            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', planItemId:'@{#line.planItemDataObject.id}', atpId:'@{#line.planItemDataObject.atp}', backup:backupFlag, pageId:'plan_item_delete_page'};
            var popupStyle = {width:'300px', height:'16px'};
            var popupOptions = {tail:{hidden:true}, position:'left', align:'middle', close:true};
            openPopup('plan_item_delete_page', retrieveData, 'plan', popupStyle, popupOptions, e);
        "/>
    </bean>

    <bean id="termAddRecommended" parent="Uif-ActionLink" p:id="recommendedTerm_add" p:actionLabel="Add to Plan" p:cssClasses="inlineBlock">
        <property name="actionScript" value="
            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', planItemId:'@{#line.planItemDataObject.id}', atpId:'@{#line.planItemDataObject.atp}', pageId:'recommended_dialog_page'};
            if (!@{#line.placeHolder}) retrieveData.courseId = '@{#line.courseDetails.courseId}';
            var popupStyle = {width:'300px', height:'16px'};
            var popupOptions = {tail:{hidden:true}, position:'left', align:'middle', close:true};
            openPopup('recommended_dialog_page', retrieveData, 'plan', popupStyle, popupOptions, e);
        "/>
    </bean>

    <bean id="termItemAlert" parent="Uif-ImageField"
          p:source="@{#ConfigProperties['ks.myplan.externalizable.images.url']}/pixel.gif"
          p:title="@{#line.alertsAsString}"
          p:altText="@{#line.alertsAsString}"
          p:render="@{#line.showAlert AND !#line.placeHolder}">
        <property name="cssClasses" value="termPlanItem__alert"/>
    </bean>

    <bean id="termItemCourseCode" parent="KSAP-MessageField" p:messageText="@{#line.courseDetails.code}">
        <property name="render" value="@{!#line.placeHolder}"/>
        <property name="cssClasses" value="termPlanItem__code"/>
    </bean>

    <bean id="termItemCourseLink" parent="Uif-LinkField" p:render="@{!#line.placeHolder}">
        <property name="linkText" value="@{#line.courseDetails.courseTitle}"/>
        <property name="title" value="@{#line.courseDetails.courseTitle}"/>
        <property name="href"
                  value="inquiry?methodToCall=start&amp;viewId=CourseDetails-InquiryView&amp;courseId=@{#line.courseDetails.courseId}&amp;courseCd=@{#line.courseDetails.code NE null ? #line.courseDetails.code.replace('&amp;','%26') : #line.courseDetails.code}"/>
        <property name="cssClasses" value="termPlanItem__title ellipsisItem"/>
    </bean>

    <bean id="termItemPlaceholderCode" parent="KSAP-MessageField">
        <property name="render" value="@{#line.placeHolder AND #line.placeHolderCode EQ #line.placeHolderValue}"/>
        <property name="messageText" value="@{#line.placeHolderCode}"/>
        <property name="title" value="@{#line.placeHolderCode}"/>
        <property name="cssClasses" value="termPlanItem__title ellipsisItem"/>
    </bean>

    <bean id="termItemPlaceholderCodeTitle" parent="KSAP-MessageField">
        <property name="render" value="@{#line.placeHolder AND #line.placeHolderCode NE #line.placeHolderValue}"/>
        <property name="messageText" value="@{#line.placeHolderCode} '@{#line.placeHolderValue}'"/>
        <property name="title" value="@{#line.placeHolderCode} '@{#line.placeHolderValue}'"/>
        <property name="cssClasses" value="termPlanItem__title ellipsisItem"/>
    </bean>

    <bean id="termItemCredit" parent="KSAP-MessageField">
        <property name="messageText"
                  value="(@{#line.placeHolder ? #line.placeHolderCredit : #line.courseDetails.credit})"/>
        <property name="render"
                  value="@{#line.placeHolder ? (#line.placeHolderCredit EQ null OR #line.placeHolderCredit EQ '' ? false : true) : true}"/>
        <property name="cssClasses" value="termPlanItem__credit"/>
    </bean>

    <bean id="termPlanItemGroup" parent="KSAP-HorizontalFieldGroup">
        <property name="additionalCssClasses" value="termPlanItem"/>
        <property name="items">
            <list>
                <bean parent="termItemAlert"/>
                <bean parent="termItemCourseCode"/>
                <bean parent="termItemCourseLink"/>
                <bean parent="termItemPlaceholderCode"/>
                <bean parent="termItemPlaceholderCodeTitle"/>
                <bean parent="termItemCredit"/>
                <bean parent="planItemNoteIcon" p:cssClasses="termPlanItem__note"/>
                <!-- Past quarters OR Current Quarter and no Time Schedule OR Time Schedule Open and NOT Scheduled -->
                <bean parent="termStudentActions">
                    <property name="render"
                              value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND ((dataObject.completedTerm) OR (!#line.timeScheduleOpen AND !dataObject.completedTerm AND dataObject.currentTermForView) OR (#line.timeScheduleOpen AND !#line.sectionsAvailable))}"/>
                    <property name="items">
                        <list>
                            <bean parent="termMoveCourse"/>
                            <bean parent="termDeleteCourse"/>
                        </list>
                    </property>
                </bean>
                <!-- Time Schedule Open and Scheduled -->
                <bean parent="termStudentActions">
                    <property name="render"
                              value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND #line.timeScheduleOpen AND #line.sectionsAvailable}"/>
                    <property name="items">
                        <list>
                            <bean parent="termSectionsToggle"/>
                            <bean parent="termDeleteCourse"/>
                        </list>
                    </property>
                </bean>
                <!-- Future Quarters and no Time Schedule -->
                <bean parent="termStudentActions">
                    <property name="render"
                              value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND !#line.timeScheduleOpen AND !dataObject.completedTerm AND !dataObject.currentTermForView}"/>
                    <property name="items">
                        <list>
                            <bean parent="termCopyCourse"/>
                            <bean parent="termMoveCourse"/>
                            <bean parent="termDeleteCourse"/>
                        </list>
                    </property>
                </bean>
                <!--For Advisers only-->
                <bean parent="termSectionsToggle">
                    <property name="cssClasses" value="termPlanItem__actions"/>
                    <property name="render"
                              value="@{T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND #line.timeScheduleOpen AND #line.sectionsAvailable}"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="termRecommendedItemGroup" parent="termPlanItemGroup">
        <property name="items">
            <list>
                <bean parent="termItemAlert"/>
                <bean parent="termItemCourseCode"/>
                <bean parent="termItemCourseLink"/>
                <bean parent="termItemPlaceholderCode"/>
                <bean parent="termItemPlaceholderCodeTitle"/>
                <bean parent="termItemCredit"/>
                <bean parent="planItemNoteIcon" p:cssClasses="termPlanItem__note">
                    <property name="propertyReplacers">
                        <list/>
                    </property>
                    <property name="toolTip">
                        <bean parent="KSAP-TooltipLeft">
                            <property name="tooltipContent"
                                      value="@{#line.note NE null ? '&quot;' + T(org.springframework.web.util.HtmlUtils).htmlEscape(#line.note).replaceAll('\n','&lt;br&gt;') + '&quot; - ' + #line.adviserName : ''}"/>
                            <property name="templateOptions">
                                <map merge="true">
                                    <entry key="themeMargins" value="{ total:'17px', difference:'10px' }"/>
                                    <entry key="themeName" value="adviser"/>
                                </map>
                            </property>
                        </bean>
                    </property>
                </bean>
                <bean parent="termAddRecommended">
                    <property name="cssClasses" value="termPlanItem__actions"/>
                    <property name="render"
                              value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser() AND #line.proposed}"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="termItems_Empty" parent="KSAP-VerticalBoxGroup">
        <property name="header">
            <bean parent="KSAP-HeaderDiv" p:cssClasses="planContainer__header"
                  p:headerTagCssClasses="planContainer__headerText"/>
        </property>
        <property name="header.rightGroup">
            <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="planContainer__headerGroup--right">
                <property name="items">
                    <list/>
                </property>
            </bean>
        </property>
        <property name="layoutManager.cssClasses" value="planContainer--empty"/>
    </bean>

    <bean id="academicRecordCoursesList_Empty" parent="termItems_Empty" p:headerText="Completed Courses">
        <property name="render" value="@{dataObject.academicRecord.size() EQ 0 AND dataObject.completedTerm}"/>
        <property name="header.rightGroup.items">
            <list>
                <bean parent="single_quarter_completed_help_icon"/>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-Message" p:messageText="You have no completed courses for this quarter."/>
            </list>
        </property>
        <property name="footer">
            <bean parent="termCreditTotal"/>
        </property>
    </bean>

    <bean id="termPlannedItems_Empty" parent="termItems_Empty" p:headerText="Planned Courses">
        <property name="header.rightGroup.items">
            <list>
                <bean parent="single_quarter_planned_help_icon"/>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-Message" p:messageText="You have no planned courses for this quarter."/>
            </list>
        </property>
        <property name="footer">
            <bean parent="termCreditTotal"/>
        </property>
        <property name="footer.render" value="@{!dataObject.completedTerm AND dataObject.openForPlanning}"/>
    </bean>

    <bean id="termBackupItems_Empty" parent="termItems_Empty" p:headerText="Backup Courses">
        <property name="header.rightGroup.items">
            <list>
                <bean parent="single_quarter_backup_help_icon"/>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-Message" p:messageText="You have no backup courses for this quarter."/>
            </list>
        </property>
    </bean>

    <bean id="termRecommendedItems_Empty" parent="termItems_Empty" p:headerText="Recommended Courses">
        <property name="render" value="@{dataObject.recommendedList.size() EQ 0}"/>
        <property name="header.rightGroup.items">
            <list>
                <bean parent="single_quarter_backup_help_icon"/>
            </list>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-Message" p:messageText="You have no recommended courses for this quarter."/>
            </list>
        </property>
    </bean>

    <bean id="termCreditTotal" parent="KSAP-HorizontalBoxGroup">
        <property name="cssClasses" value="planTerm__creditTotal"/>
        <property name="items">
            <list>
                <bean parent="KSAP-Message" p:messageText="Credits"/>
                <bean parent="single_quarter_credits_help_icon"/>
                <bean parent="KSAP-Message" p:messageText="@{dataObject.credits ne null ? dataObject.credits : '0'}">
                    <property name="cssClasses" value="planTerm__creditValue"/>
                </bean>
            </list>
        </property>
    </bean>

</beans>