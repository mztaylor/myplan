<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <!--
     Copyright 2007-2009 The Kuali Foundation

     Licensed under the Educational Community License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

     http://www.opensource.org/licenses/ecl2.php

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
    -->

    <!--
      This provides the pop-over panels (not the "dialog" ones) for CRUD actions on Course items.
    -->
    <bean id="PlannedCourse-FormView" parent="MyPlanBaseFormView">
        <property name="theme">
            <bean parent="MyPlanRetrievedTheme"/>
        </property>
        <property name="onLoadScript" value=""/>
        <property name="id" value="PlannedCourse-FormView"/>
        <property name="entryPageId" value="add_remove_course_popover_page"/>
        <property name="formClass" value="org.kuali.student.myplan.plan.form.PlanForm"/>
        <property name="footer.render" value="false"/>
        <property name="header.render" value="false"/>
        <property name="items">
            <list>

                <!-- Page displaying all plan action response. This page is returned in response to any action on a plan item. It passes data base to javascript events to the UI-->
                <bean parent="Uif-Page" p:id="plan_item_action_response_page">
                    <property name="header.render" value="false"/>
                    <property name="validationMessages">
                        <bean parent="Uif-GroupValidationMessages">
                            <property name="displayMessages" value="true"/>
                            <property name="displayFieldLabelWithMessages" value="false"/>
                        </bean>
                    </property>
                    <property name="validationMessages.render" value="false"/>
                    <property name="items">
                        <list>
                            <bean id="requestStatus" parent="KSAP-SimpleDataField" p:propertyName="requestStatus"/>
                            <bean id="jsonEvents" parent="KSAP-SimpleDataField"
                                  p:propertyName="javascriptEventsAsJSON"/>
                        </list>
                    </property>
                </bean>

                <!-- This page builds the popover with the 3 sliding sections used to view course summary, add to plan and remove from courses list contextually -->
                <bean parent="KSAP-PopoverPage" p:id="add_remove_course_popover_page">
                    <property name="header.render" value="false"/>
                    <property name="items">
                        <list>
                            <bean parent="courseTitleLink"/>
                            <bean id="course_popover_group" parent="KSAP-HorizontalBoxGroup-NoMargin" p:width="300px">
                                <property name="items">
                                    <list>
                                        <!-- Course View and Actions -->
                                        <ref bean="course_details_info"/>
                                        <!-- Add to Plan Form fields -->
                                        <ref bean="add_planned_course_fields"/>
                                        <!-- Delete from courses list confirmation -->
                                        <ref bean="delete_from_list_confirmation"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--This page is used for the View Course Summary Dialog box -->
                <bean parent="KSAP-PopoverPage" p:id="course_summary_dialog_page" p:headerText="View Course Summary">
                    <property name="items">
                        <list>
                            <bean parent="courseTitleLink"/>
                            <bean parent="course_details_summary_info"/>
                            <bean parent="KSAP-HorizontalBoxGroup">
                                <property name="render"
                                          value="@{!T(org.kuali.student.myplan.utils.UserSessionHelper).isAdviser()}"/>
                                <property name="items">
                                    <list>
                                        <!-- If not in plan and not in saved courses and not in academic record list -->
                                        <bean parent="KSAP-HorizontalBoxGroup"
                                              p:render="@{(plannedCourseSummary.backupList.size() EQ 0 AND plannedCourseSummary.plannedList.size() EQ 0 AND plannedCourseSummary.savedItemId EQ null AND plannedCourseSummary.academicTerms.size() EQ 0)}">
                                            <property name="items">
                                                <list>
                                                    <ref bean="addToPlanButton"/>
                                                    <ref bean="addSavedCourseButton"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <!-- If not in plan and in saved courses and not in academic list-->
                                        <bean parent="KSAP-HorizontalBoxGroup"
                                              p:render="@{(plannedCourseSummary.backupList.size() EQ 0 AND plannedCourseSummary.plannedList.size() EQ 0 AND plannedCourseSummary.savedItemId NE null AND plannedCourseSummary.academicTerms.size() EQ 0)}">
                                            <property name="items">
                                                <list>
                                                    <ref bean="addToPlanButton"/>
                                                    <ref bean="removeSavedCourseButton"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <!-- If in plan and in saved courses and not in academic record list -->
                                        <bean parent="KSAP-HorizontalBoxGroup"
                                              p:render="@{((plannedCourseSummary.backupList.size() GT 0 OR plannedCourseSummary.plannedList.size() GT 0) AND plannedCourseSummary.savedItemId NE null and plannedCourseSummary.academicTerms.size() EQ 0)}">
                                            <property name="items">
                                                <list>
                                                    <ref bean="addToPlanButton"/>
                                                    <ref bean="removeSavedCourseButton"/>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-HorizontalBoxGroup-NoMargin"
                                  p:render="@{(plannedCourseSummary.backupList.size() GT 0 OR plannedCourseSummary.plannedList.size() GT 0 OR plannedCourseSummary.savedItemId NE null OR plannedCourseSummary.academicTerms.size() GT 0)}">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-status</value>
                                        <value>info</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="MyPlanMessagingIcon"/>
                                        <bean parent="KSAP-SimpleDataField" p:propertyName="courseAndPlanSummary"
                                              p:escapeHtmlInPropertyValue="false">
                                            <property name="propertyEditor" ref="crud_message_matrix_formatter"/>
                                            <property name="cssClasses">
                                                <list merge="true">
                                                    <value>myplan-data-list</value>
                                                    <value>message</value>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--This page is used for adding a course to the plan dialog box -->
                <bean parent="KSAP-PopoverPage" p:id="add_dialog_page" p:headerText="Add to Plan">
                    <property name="instructionalText"
                              value="Which quarter would you like to add [b]@{courseSummaryDetails.code}[/b] to?"/>
                    <property name="items">
                        <list>
                            <bean parent="courseTermsScheduled"/>
                            <bean parent="courseTermSelection"/>
                            <bean parent="planItemNote"/>
                            <bean parent="courseMarkAsBackup"/>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean p:id="addUpdatePlanItem"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="Add To Plan">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'addUpdatePlanItem', courseId:'@{courseSummaryDetails.courseId}'};
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#addUpdatePlanItem').on('PLAN_ITEM_ADDED', function(event, data){
                                                                if (data.planItemType === 'planned' || data.planItemType === 'backup') {
                                                                    fnDisplayMessage(data.message, data.cssClass, 'actionButtonsGroup', true, false);
                                                                }
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true,'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="errorPlaceholder"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--This page is used for the Move to another quarter Dialog box -->
                <bean parent="KSAP-PopoverPage" p:id="move_dialog_page" p:headerText="Move to Another Quarter">
                    <property name="instructionalText"
                              value="Which quarter would you like to move [b]@{generalPlaceholder EQ null ? courseCd EQ null ?courseSummaryDetails.code:courseCd : placeholderCode}[/b] to?"/>
                    <property name="items">
                        <list>
                            <ref bean="courseTermsScheduled"/>
                            <ref bean="courseTermSelection"/>
                            <bean parent="KSAP-HorizontalBoxGroup"
                                  p:render="@{planActivities ne null AND planActivities.size() gt 0}">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-status</value>
                                        <value>info</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="MyPlanMessagingIcon"/>
                                        <bean id="move_sections_info" parent="KSAP-SimpleDataField"
                                              p:propertyName="this" p:escapeHtmlInPropertyValue="false">
                                            <property name="propertyEditor" ref="move_planned_sections_formatter"/>
                                            <property name="onDocumentReadyScript" value="
                                                jQuery('#move_sections_info').on('PLAN_ITEM_ADDED', function(event, data){
                                                    jQuery(this).parents().find('.myplan-status.info').fadeOut(250);
                                                });"/>
                                            <property name="cssClasses">
                                                <list merge="true">
                                                    <value>message</value>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean p:id="movePlannedCourse"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="Move">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'movePlannedCourse', planItemId:'@{planItemId}'};
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#movePlannedCourse').on('PLAN_ITEM_ADDED', function(event, data){
                                                                if (data.planItemType === 'planned' || data.planItemType === 'backup') {
                                                                    fnDisplayMessage(data.message, data.cssClass, 'actionButtonsGroup', true, false);
                                                                }
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true, 'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="errorPlaceholder"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--This page is used for the Copy to another quarter Dialog box -->
                <bean parent="KSAP-PopoverPage" p:id="copy_dialog_page" p:headerText="Copy to Another Quarter">
                    <property name="instructionalText"
                              value="Which quarter would you like to copy [b]@{generalPlaceholder EQ null ? courseCd EQ null ?courseSummaryDetails.code:courseCd : placeholderCode}[/b] to?"/>
                    <property name="items">
                        <list>
                            <ref bean="courseTermsScheduled"/>
                            <ref bean="courseTermSelection"/>
                            <bean parent="KSAP-HorizontalBoxGroup"
                                  p:render="@{planActivities ne null AND planActivities.size() gt 0}">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-status</value>
                                        <value>info</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="MyPlanMessagingIcon"/>
                                        <bean id="copy_sections_info" parent="KSAP-SimpleDataField"
                                              p:propertyName="this" p:escapeHtmlInPropertyValue="false">
                                            <property name="propertyEditor" ref="copy_planned_sections_formatter"/>
                                            <property name="onDocumentReadyScript" value="
                                                jQuery('#copy_sections_info').on('PLAN_ITEM_ADDED', function(event, data){
                                                    jQuery(this).parents().find('.myplan-status.info').fadeOut(250);
                                                });"/>
                                            <property name="cssClasses">
                                                <list merge="true">
                                                    <value>message</value>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean p:id="copyPlannedCourse"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:render="@{setToPlanning}"
                                                          p:actionLabel="Copy">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'copyPlannedCourse', planItemId:'@{planItemId}'};
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#copyPlannedCourse').on('PLAN_ITEM_ADDED', function(event, data){
                                                                if (data.planItemType === 'planned' || data.planItemType === 'backup') {
                                                                    fnDisplayMessage(data.message, data.cssClass, 'actionButtonsGroup', true, false);
                                                                }
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true, 'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean p:id="copyPastPlannedCourse"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:render="@{setToPlanning eq false and planItemId ne null}"
                                                          p:actionLabel="Copy">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'copyPlannedCourse', planItemId:'@{planItemId}'};
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#copyPastPlannedCourse').on('PLAN_ITEM_ADDED', function(event, data){
                                                                if (data.planItemType === 'planned' || data.planItemType === 'backup') {
                                                                    fnDisplayMessage(data.message, data.cssClass, 'actionButtonsGroup', true, false);
                                                                }
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true, 'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean p:id="copyAcademicCourse"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:render="@{setToPlanning eq false and planItemId eq null}"
                                                          p:actionLabel="Copy">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'addUpdatePlanItem', courseId:'@{courseId}'};
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#copyAcademicCourse').on('PLAN_ITEM_ADDED', function(event, data){
                                                                if (data.planItemType === 'planned' || data.planItemType === 'backup') {
                                                                    fnDisplayMessage(data.message, data.cssClass, 'actionButtonsGroup', true, false);
                                                                }
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true, 'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="errorPlaceholder"/>
                                    </list>
                                </property>
                            </bean>


                        </list>
                    </property>
                </bean>

                <!--This page is used for the Delete plan Item Dialog box -->
                <bean parent="KSAP-PopoverPage" p:id="plan_item_delete_page"
                      p:headerText="Delete @{generalPlaceholder EQ null ? courseCd EQ null ?courseSummaryDetails.code:courseCd : placeholderCode} @{atpId eq null ? 'Bookmark' : 'from the '+shortTerm+' Plan'}">
                    <property name="instructionalText"
                              value="Are you sure that you want to delete [b]@{generalPlaceholder EQ null ? courseCd EQ null ?courseSummaryDetails.code:courseCd : placeholderCode}[/b]? Once deleted, you cannot undo."/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-HorizontalBoxGroup"
                                  p:render="@{planActivities ne null AND planActivities.size() gt 0}">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-status</value>
                                        <value>info</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="MyPlanMessagingIcon"/>
                                        <bean id="delete_sections_info" parent="KSAP-SimpleDataField"
                                              p:propertyName="this" p:escapeHtmlInPropertyValue="false">
                                            <property name="propertyEditor" ref="delete_planned_sections_formatter"/>
                                            <property name="onDocumentReadyScript" value="
                                                jQuery('#delete_sections_info').on('PLAN_ITEM_DELETED', function(event, data){
                                                    jQuery(this).parents().find('.myplan-status.info').fadeOut(250);
                                                });"/>
                                            <property name="cssClasses">
                                                <list merge="true">
                                                    <value>message</value>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-HorizontalBoxGroup">
                                <property name="items">
                                    <list>
                                        <bean p:id="deletePlannedCourse" parent="Uif-PrimaryActionButton-Small"
                                              p:actionLabel="Delete">
                                            <property name="actionScript" value="
                                                var additionalFormData = {
                                                    viewId: 'PlannedCourse-FormView',
                                                    methodToCall: 'removeItem',
                                                    planItemId: '@{planItemId}',
                                                    atpId: '@{atpId}'
                                                };
                                                submitPopupForm(additionalFormData, e, false);
                                            "/>
                                            <property name="onDocumentReadyScript" value="
                                                jQuery('#deletePlannedCourse').on('PLAN_ITEM_DELETED', function(event, data){
                                                    fnDisplayMessage(data.message, data.cssClass, 'deletePlannedCourse', true, true);
                                                }).on('ERROR', function(event, data) {
                                                    fnDisplayMessage(data.message, data.cssClass, 'deletePlannedCourse', true, true);
                                                });
                                            "/>
                                        </bean>
                                        <bean parent="closePopoverCancel"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!-- This page is for adding courses, course placeholder, or a general placeholder -->
                <bean parent="KSAP-PopoverPage" p:id="plan_item_add_page"
                      p:headerText="@{#form.planItemId EQ null ? 'What would you like to add to ':'Edit your course or placeholder for '} @{#form.termName}@{#form.planItemId EQ null ? '?' : ''}"
                      p:width="325px">
                    <property name="items">
                        <list>
                            <bean parent="KSAP-VerticalBoxGroup">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-remove-margin</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <!--TODO: https://jira.kuali.org/browse/KULRICE-9846 disabled expressions are evaluated before the defaultValue is set, workaround is to set the value on the backend -->
                                        <bean parent="Uif-InputField" p:propertyName="type" p:defaultValue="course">
                                            <property name="control">
                                                <bean parent="Uif-VerticalRadioControl">
                                                    <property name="options">
                                                        <list>
                                                            <bean parent="Uif-KeyLabelPair" p:key="course"
                                                                  p:value="Course or course placeholder [css='ksap-text-gray fl-font-size-90'](e.g. ENGL 3xx)[/css]"/>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-HorizontalBoxGroup" p:style="margin-left:2em;"
                                              p:id="courseOptions"
                                              p:progressiveRender="#form.type EQ 'course'">
                                            <property name="items">
                                                <list>
                                                    <bean parent="Uif-InputField" p:propertyName="courseCd"
                                                          p:id="courseCode" p:width="70%">
                                                        <property name="control">
                                                            <bean parent="Uif-TextControl" p:style="width:180px;">
                                                                <property name="onDocumentReadyScript"
                                                                          value="jQuery('#courseCode_control').focus();"/>
                                                                <property name="watermarkText" value="e.g. BIOL 180"/>
                                                                <property name="maxLength" value="10"/>
                                                            </bean>
                                                        </property>
                                                    </bean>
                                                    <bean parent="Uif-InputField" p:propertyName="credit"
                                                          p:id="creditsCourse" p:hidden="true"
                                                          p:defaultValue="@{#form.type EQ 'course' AND #form.credit NE null ? #form.credit : ''}">
                                                        <property name="control">
                                                            <bean parent="dropdownPlaceholderCredits"/>
                                                        </property>
                                                        <property name="onDocumentReadyScript" value="
                                                            var condition = function () {
                                                                return ( /([0-9]xx)/i.test( coerceValue('courseCd') ) );
                                                            };
                                                            setupProgressiveCheck('courseCd', 'creditsCourse', 'creditsCourse', condition, false, '', true)
                                                        "/>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-remove-margin</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-InputField" p:propertyName="type" p:defaultValue="course">
                                            <property name="control">
                                                <bean parent="Uif-VerticalRadioControl">
                                                    <property name="options">
                                                        <list>
                                                            <bean parent="Uif-KeyLabelPair" p:key="general"
                                                                  p:value="General placeholder [css='ksap-text-gray fl-font-size-90'](e.g. Elective, VLPA, Other, etc)[/css]"/>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-HorizontalBoxGroup" p:style="margin-left:2em;"
                                              p:id="placeholderOptions"
                                              p:progressiveRender="#form.type EQ 'general'">
                                            <property name="items">
                                                <list>
                                                    <bean parent="KSAP-SimpleInputField"
                                                          p:propertyName="generalPlaceholder"
                                                          p:width="70%">
                                                        <property name="control">
                                                            <bean parent="Uif-DropdownControl" p:style="width:90%;"/>
                                                        </property>
                                                        <property name="optionsFinder">
                                                            <bean class="org.kuali.student.myplan.plan.util.PlaceHoldersBuilder"/>
                                                        </property>
                                                    </bean>
                                                    <bean parent="KSAP-SimpleInputField" p:propertyName="credit"
                                                          p:id="creditsGeneral"
                                                          p:defaultValue="@{#form.type EQ 'general' AND #form.credit NE null ? #form.credit : ''}">
                                                        <property name="control">
                                                            <bean parent="dropdownPlaceholderCredits"/>
                                                        </property>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="planItemNote" p:style="margin: 10px 0 20px;"
                                  p:label="Notes"/>
                            <bean parent="KSAP-SimpleInputField" p:propertyName="planItemId"
                                  p:hidden="true" p:render="@{#form.planItemId NE null}">
                                <property name="control">
                                    <bean parent="Uif-HiddenControl"/>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean id="actionCoursePlaceholder" p:id="actionCoursePlaceholder"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="@{#form.planItemId EQ null ? 'Add to Plan':'Save'}">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {
                                                                viewId: 'PlannedCourse-FormView',
                                                                methodToCall: 'addUpdatePlanItem',
                                                                atpId: '@{#form.atpId}',
                                                                backup: @{#form.backup},
                                                                pageId: 'plan_item_add_page'
                                                            };
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="disabled"
                                                                  value="@{#form.type EQ null OR (#form.type EQ 'course' AND #form.courseCd EQ null) OR (#form.type EQ 'general' AND #form.generalPlaceholder EQ null) OR (#form.generalPlaceholder EQ 'uw.academicplan.placeholder.other|uw.academicplan.placeholder' AND #form.note EQ null)}"/>
                                                        <property name="evaluateDisabledOnKeyUp" value="true"/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#actionCoursePlaceholder').on('PLAN_ITEM_ADDED PLAN_ITEM_UPDATED', function(event, data){
                                                                fnCloseAllPopups();
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true,'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-VerticalBoxGroup" p:id="errorPlaceholder" p:hidden="true"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!-- This page is for editing a note by itself -->
                <bean parent="KSAP-PopoverPage" p:id="edit_note_page"
                      p:headerText="Edit Note">
                    <property name="instructionalText"
                              value="Edit note for [b]@{#form.courseCd NE null ? #form.courseCd : #form.placeholderCode}[/b]"/>
                    <property name="items">
                        <list>
                            <bean parent="planItemNote"/>
                            <bean parent="KSAP-SimpleInputField" p:propertyName="generalPlaceholder"
                                  p:hidden="true" p:render="@{#form.generalPlaceholder NE null}">
                                <property name="control">
                                    <bean parent="Uif-HiddenControl"/>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean id="actionSaveNote" p:id="actionSaveNote"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="Save">
                                                        <property name="disabled"
                                                                  value="@{#form.generalPlaceholder EQ 'uw.academicplan.placeholder.other|uw.academicplan.placeholder' AND #form.note EQ null}"/>
                                                        <property name="evaluateDisabledOnKeyUp" value="true"/>
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {
                                                                viewId: 'PlannedCourse-FormView',
                                                                methodToCall: 'updateNote',
                                                                atpId: '@{#form.atpId}',
                                                                backup: @{#form.backup},
                                                                pageId: 'edit_note_page',
                                                                planItemId: '@{#form.planItemId}'
                                                            };
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#actionSaveNote').on('PLAN_ITEM_UPDATED', function(event, data){
                                                                fnCloseAllPopups();
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true,'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-VerticalBoxGroup" p:id="errorPlaceholder" p:hidden="true"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!-- This page is for advisers adding recommended courses, course placeholder, or general placeholder -->
                <bean parent="KSAP-PopoverPage" p:id="recommended_add_page"
                      p:headerText="What would you recommend for @{#form.termName}?"
                      p:width="325px">
                    <property name="items">
                        <list>
                            <bean parent="KSAP-VerticalBoxGroup">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-remove-margin</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <!--TODO: https://jira.kuali.org/browse/KULRICE-9846 disabled expressions are evaluated before the defaultValue is set, workaround is to set the value on the backend -->
                                        <bean parent="Uif-InputField" p:propertyName="type" p:defaultValue="course">
                                            <property name="control">
                                                <bean parent="Uif-VerticalRadioControl">
                                                    <property name="options">
                                                        <list>
                                                            <bean parent="Uif-KeyLabelPair" p:key="course"
                                                                  p:value="Course or course placeholder [css='ksap-text-gray fl-font-size-90'](e.g. ENGL 3xx)[/css]"/>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-HorizontalBoxGroup" p:style="margin-left:2em;"
                                              p:id="courseOptions"
                                              p:progressiveRender="#form.type EQ 'course'">
                                            <property name="items">
                                                <list>
                                                    <bean parent="Uif-InputField" p:propertyName="courseCd"
                                                          p:id="courseCode" p:width="70%">
                                                        <property name="control">
                                                            <bean parent="Uif-TextControl" p:style="width:180px;">
                                                                <property name="onDocumentReadyScript"
                                                                          value="jQuery('#courseCode_control').focus();"/>
                                                                <property name="watermarkText" value="e.g. BIOL 180"/>
                                                                <property name="maxLength" value="10"/>
                                                            </bean>
                                                        </property>
                                                    </bean>
                                                    <bean parent="Uif-InputField" p:propertyName="credit"
                                                          p:id="creditsCourse" p:hidden="true"
                                                          p:defaultValue="@{#form.type EQ 'course' AND #form.credit NE null ? #form.credit : ''}">
                                                        <property name="control">
                                                            <bean parent="dropdownPlaceholderCredits"/>
                                                        </property>
                                                        <property name="onDocumentReadyScript" value="
                                                            var condition = function () {
                                                                return ( /([0-9]xx)/i.test( coerceValue('courseCd') ) );
                                                            };
                                                            setupProgressiveCheck('courseCd', 'creditsCourse', 'creditsCourse', condition, false, '', true)
                                                        "/>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup">
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-remove-margin</value>
                                    </list>
                                </property>
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-InputField" p:propertyName="type" p:defaultValue="course">
                                            <property name="control">
                                                <bean parent="Uif-VerticalRadioControl">
                                                    <property name="options">
                                                        <list>
                                                            <bean parent="Uif-KeyLabelPair" p:key="general"
                                                                  p:value="General placeholder [css='ksap-text-gray fl-font-size-90'](e.g. Elective, VLPA, Other, etc)[/css]"/>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-HorizontalBoxGroup" p:style="margin-left:2em;"
                                              p:id="placeholderOptions"
                                              p:progressiveRender="#form.type EQ 'general'">
                                            <property name="items">
                                                <list>
                                                    <bean parent="KSAP-SimpleInputField"
                                                          p:propertyName="generalPlaceholder"
                                                          p:width="70%">
                                                        <property name="control">
                                                            <bean parent="Uif-DropdownControl" p:style="width:90%;"/>
                                                        </property>
                                                        <property name="optionsFinder">
                                                            <bean class="org.kuali.student.myplan.plan.util.PlaceHoldersBuilder"/>
                                                        </property>
                                                    </bean>
                                                    <bean parent="KSAP-SimpleInputField" p:propertyName="credit"
                                                          p:id="creditsGeneral"
                                                          p:defaultValue="@{#form.type EQ 'general' AND #form.credit NE null ? #form.credit : ''}">
                                                        <property name="control">
                                                            <bean parent="dropdownPlaceholderCredits"/>
                                                        </property>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="planItemNote" p:style="margin: 10px 0 20px;"
                                  p:label="Describe recommendation reason"
                                  p:control.watermarkText="Enter a short description (500 characters max)"/>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean id="actionRecommendedItem" p:id="actionRecommendedItem"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="Recommend">
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {
                                                                viewId: 'PlannedCourse-FormView',
                                                                methodToCall: 'addRecommendedPlanItem',
                                                                atpId: '@{#form.atpId}',
                                                                pageId: 'recommended_add_page'
                                                            };
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="disabled"
                                                                  value="@{#form.type EQ null OR (#form.type EQ 'course' AND #form.courseCd EQ null) OR (#form.type EQ 'general' AND #form.generalPlaceholder EQ null) OR (#form.generalPlaceholder EQ 'uw.academicplan.placeholder.other|uw.academicplan.placeholder' AND #form.note EQ null)}"/>
                                                        <property name="evaluateDisabledOnKeyUp" value="true"/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#actionRecommendedItem').on('PLAN_ITEM_ADDED', function(event, data){
                                                                fnCloseAllPopups();
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true,'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-VerticalBoxGroup" p:id="errorPlaceholder" p:hidden="true"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--This page is used for the View Course Recommendation Dialog box -->
                <bean parent="KSAP-PopoverPage" p:id="recommended_dialog_page"
                      p:headerText="Adviser Recommendation for @{termName}">
                    <property name="items">
                        <list>
                            <bean parent="courseTitleLink"/>
                            <bean parent="course_details_summary_info"/>
                            <bean parent="KSAP-SimpleDataField" p:propertyName="note">
                                <property name="render" value="@{note NE '' AND note NE null}"/>
                                <property name="label"
                                          value="@{recommendedBy} said on @{T(org.kuali.student.myplan.plan.util.DateFormatHelper).getDateFomatted(dateAdded.toString())}"/>
                                <property name="labelPlacement" value="TOP"/>
                                <property name="fieldLabel.render" value="true"/>
                                <property name="fieldLabel.cssClasses">
                                    <list merge="true">
                                        <value>ksap-text-normal</value>
                                    </list>
                                </property>
                                <property name="cssClasses">
                                    <list merge="true">
                                        <value>myplan-adviser-recommendation</value>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                                <property name="render" value="@{owner}"/>
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                            <property name="items">
                                                <list>
                                                    <bean id="removeRecommendedItem" p:id="removeRecommendedItem"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="Delete Recommendation">
                                                        <property name="render"
                                                                  value="@{T(org.kuali.student.myplan.utils.UserSessionHelper).isAdviser()}"/>
                                                        <property name="actionScript" value="
                                                            var retrieveData = {action:'plan', viewId:'PlannedCourse-FormView', methodToCall:'startAddPlannedCourseForm', planItemId:'@{#form.planItemId}', pageId:'recommended_delete_page'};
                                                            var popupStyle = {width:'300px', height:'16px'};
                                                            var popupOptions = {tail:{hidden:true}, align:'top', close:true};
                                                            openPopup('recommended_delete_page', retrieveData, 'plan', popupStyle, popupOptions, e);
                                                        "/>
                                                    </bean>
                                                    <bean id="acceptRecommendedItem" p:id="acceptRecommendedItem"
                                                          p:disabled="true"
                                                          parent="Uif-PrimaryActionButton-Small"
                                                          p:actionLabel="Accept Recommendation">
                                                        <property name="render"
                                                                  value="@{!T(org.kuali.student.myplan.utils.UserSessionHelper).isAdviser()}"/>
                                                        <property name="actionScript" value="
                                                            var additionalFormData = {
                                                                viewId: 'PlannedCourse-FormView',
                                                                methodToCall: 'acceptRecommendedPlanItem',
                                                                atpId: '@{#form.atpId}',
                                                                pageId: 'recommended_dialog_page'
                                                            };
                                                            submitPopupForm(additionalFormData, e, false);
                                                        "/>
                                                        <property name="onDocumentReadyScript" value="
                                                            jQuery('#removeRecommendedItem').on('PLAN_ITEM_ADDED', function(event, data){
                                                                fnCloseAllPopups();
                                                            }).on('ERROR', function(event, data){
                                                                fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false,true,'errorPlaceholder');
                                                            });
                                                        "/>
                                                    </bean>
                                                    <bean parent="closePopoverCancel" p:actionLabel="Close"/>
                                                </list>
                                            </property>
                                        </bean>
                                        <bean parent="KSAP-VerticalBoxGroup" p:id="errorPlaceholder" p:hidden="true"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--This page is used for the Delete Recommended plan item -->
                <bean parent="KSAP-PopoverPage" p:id="recommended_delete_page"
                      p:headerText="Delete Your Recommendation">
                    <property name="instructionalText"
                              value="Are you sure that you want to delete [b]@{generalPlaceholder EQ null ? courseCd EQ null ? courseSummaryDetails.code:courseCd : placeholderCode}[/b] recommendation? Recommendation withdrawal notification will be sent immediately."/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-HorizontalBoxGroup">
                                <property name="items">
                                    <list>
                                        <bean p:id="deleteRecommendedItem" parent="Uif-PrimaryActionButton-Small"
                                              p:actionLabel="Delete">
                                            <property name="actionScript" value="
                                                var additionalFormData = {
                                                    viewId: 'PlannedCourse-FormView',
                                                    methodToCall: 'removeRecommendedItem',
                                                    planItemId: '@{planItemId}',
                                                    pageId: 'recommended_delete_page'
                                                };
                                                submitPopupForm(additionalFormData, e, false);
                                            "/>
                                            <property name="onDocumentReadyScript" value="
                                                jQuery('#deleteRecommendedItem').on('PLAN_ITEM_DELETED', function(event, data){
                                                    fnDisplayMessage(data.message, data.cssClass, 'deleteRecommendedItem', true, true);
                                                }).on('ERROR', function(event, data) {
                                                    fnDisplayMessage(data.message, data.cssClass, 'deleteRecommendedItem', true, true);
                                                });
                                            "/>
                                        </bean>
                                        <bean parent="closePopoverCancel"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="course_details_info" parent="KSAP-VerticalBoxGroup" p:width="300px">
        <property name="items">
            <list>
                <ref bean="course_details_summary_info"/>
            </list>
        </property>
    </bean>

    <bean id="course_details_summary_info" parent="KSAP-VerticalBoxGroup-NoMargin">
        <property name="items">
            <list>
                <!-- List of Scheduled Terms -->
                <ref bean="courseTermsScheduled"/>
                <!-- Last Offered -->
                <bean parent="KSAP-SimpleDataField" p:label="Last Offered"
                      p:propertyName="courseSummaryDetails.lastOffered">
                    <property name="fieldLabel">
                        <bean parent="Uif-Label"/>
                    </property>
                    <property name="fieldLabel.cssClasses" value="fl-font-size-90 fl-text-gray myplan-text-normal"/>
                    <property name="render"
                              value="@{courseSummaryDetails.lastOffered NE null AND courseSummaryDetails.scheduledTerms.size() EQ 0}"/>
                </bean>
                <!-- Projected Terms -->
                <bean parent="KSAP-SimpleDataField" p:label="Projected for"
                      p:propertyName="courseSummaryDetails.termsOffered"
                      p:escapeHtmlInPropertyValue="false">
                    <property name="fieldLabel">
                        <bean parent="Uif-Label"/>
                    </property>
                    <property name="fieldLabel.cssClasses" value="fl-font-size-90 fl-text-gray myplan-text-normal"/>
                    <property name="cssClasses">
                        <list merge="true">
                            <value>myplan-data-list</value>
                        </list>
                    </property>
                    <property name="render"
                              value="@{courseSummaryDetails.termsOffered.size() GT 0}"/>
                </bean>
                <bean parent="KSAP-MessageField" p:label="Projected for">
                    <property name="fieldLabel">
                        <bean parent="Uif-Label"/>
                    </property>
                    <property name="fieldLabel.cssClasses" value="fl-font-size-90 fl-text-gray myplan-text-normal"/>
                    <property name="messageText"
                              value="Check with the department or your adviser for more information about this course."/>
                    <property name="render" value="@{courseSummaryDetails.termsOffered.size() EQ 0}"/>
                </bean>
                <!-- Requisites -->
                <bean parent="Uif-ListDataField" p:label="Course Requisites"
                      p:propertyName="courseSummaryDetails.requisites" p:escapeHtmlInPropertyValue="false">
                    <property name="fieldLabel.cssClasses" value="fl-font-size-90 fl-text-gray myplan-text-normal"/>
                    <property name="cssClasses">
                        <list merge="true">
                            <value>myplan-data-list</value>
                            <value>myplan-multiline-ellipsis</value>
                        </list>
                    </property>
                    <property name="render"
                              value="@{courseSummaryDetails.requisites.size() GT 0}"/>
                </bean>
                <bean parent="KSAP-MessageField" p:label="Course Requisites">
                    <property name="fieldLabel">
                        <bean parent="Uif-Label"/>
                    </property>
                    <property name="fieldLabel.cssClasses" value="fl-font-size-90 fl-text-gray myplan-text-normal"/>
                    <property name="message">
                        <bean parent="Uif-Message" p:messageText="None"/>
                    </property>
                    <property name="render" value="@{courseSummaryDetails.requisites.size() EQ 0}"/>
                </bean>
                <!-- Link to view more details (course details view) -->
                <bean parent="Uif-Link" p:linkText="View more details">
                    <property name="title" value="View more details about @{courseSummaryDetails.code}"/>
                    <property name="href"
                              value="inquiry?methodToCall=start&amp;viewId=CourseDetails-InquiryView&amp;courseId=@{courseSummaryDetails.courseId}"/>
                </bean>
            </list>
        </property>
    </bean>

    <!-- Group for "Add Plan Item" inputs -->
    <bean id="add_planned_course_fields" parent="KSAP-VerticalBoxGroup" p:width="300px" p:hidden="true">
        <property name="instructionalText"
                  value="Which quarter would you like to add [b]@{courseSummaryDetails.code}[/b] to?"/>
        <property name="items">
            <list>
                <bean parent="courseTermsScheduled"/>
                <bean parent="courseTermSelection"/>
                <!-- TODO: plan item note is 1.5 functionality, do not commit to 1.4 -->
                <bean parent="planItemNote"/>
                <bean parent="courseMarkAsBackup"/>
                <bean parent="KSAP-VerticalBoxGroup-NoMargin" p:id="actionButtonsGroup">
                    <property name="items">
                        <list>
                            <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                                <property name="items">
                                    <list>
                                        <bean p:id="addUpdatePlanItem" parent="Uif-PrimaryActionButton-Small"
                                              p:actionLabel="Add To Plan">
                                            <property name="actionScript" value="
                                                var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'addUpdatePlanItem', courseId:'@{courseSummaryDetails.courseId}'};
                                                submitPopupForm(additionalFormData, e, false);
                                            "/>
                                            <property name="onDocumentReadyScript" value="
                                                jQuery('#addUpdatePlanItem').on('PLAN_ITEM_ADDED', function(event, data){
                                                    if (data.planItemType === 'planned' || data.planItemType === 'backup') {
                                                         fnDisplayMessage(data.message, data.cssClass, 'actionButtonsGroup', true, false);
                                                    }
                                                }).on('ERROR', function(event, data){
                                                    fnDisplayMessage(data.message, data.cssClass, 'errorPlaceholder', true, false, true, 'errorPlaceholder');
                                                });
                                            "/>
                                        </bean>
                                        <bean p:id="cancelAddPlannedCourse" parent="Uif-SecondaryActionButton-Small"
                                              p:actionLabel="Cancel">
                                            <property name="actionScript"
                                                      value="fnPopoverSlider('course_details_info', 'course_popover_group', 'right');"/>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="errorPlaceholder"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!-- Delete from courses list confirmation -->
    <bean id="delete_from_list_confirmation" parent="KSAP-VerticalBoxGroup" p:hidden="true" p:width="300px">
        <property name="instructionalText"
                  value="Are you sure that you want to delete [b]@{generalPlaceholder EQ null ? courseSummaryDetails.code : generalPlaceholder}[/b] from the Bookmarked Courses list? Once deleted, you cannot undo."/>
        <property name="items">
            <list>
                <bean parent="KSAP-SimpleInputField" p:propertyName="planItemId"
                      p:defaultValue="@{planItemId}" p:hidden="true">
                    <property name="control">
                        <bean parent="Uif-HiddenControl"/>
                    </property>
                </bean>
                <!-- Container for buttons -->
                <bean parent="KSAP-HorizontalBoxGroup-NoMargin">
                    <property name="items">
                        <list>
                            <bean p:id="deleteCourseYesButton" parent="Uif-PrimaryActionButton-Small"
                                  p:actionLabel="Delete">
                                <property name="actionScript" value="
                                    var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'removeItem', courseId:'@{courseSummaryDetails.courseId}'};
                                    submitPopupForm(additionalFormData, e, false);
                                "/>
                                <property name="onDocumentReadyScript" value="
                                   jQuery('#deleteCourseYesButton').on('PLAN_ITEM_DELETED', function(event, data) {
                                       fnDisplayMessage(data.message, data.cssClass, 'deleteCourseYesButton', true, true);
                                   }).on('ERROR', function(event, data) {
                                       fnDisplayMessage(data.message, data.cssClass, 'deleteCourseYesButton', true, true);
                                   });"/>
                            </bean>
                            <bean p:id="deleteCourseNoButton" parent="Uif-SecondaryActionButton-Small"
                                  p:actionLabel="Cancel">
                                <property name="actionScript"
                                          value="fnPopoverSlider('course_details_info', 'course_popover_group', 'right');"/>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!--****************************Academic Planned Form View**********************-->
    <bean id="StudentAcademicPlanner-FormView" parent="MyPlanBaseFormView">
        <property name="theme">
            <bean parent="MyPlanRetrievedTheme"/>
        </property>
        <property name="onLoadScript" value=""/>
        <property name="id" value="StudentAcademicPlanner-FormView"/>
        <property name="footer.render" value="false"/>
        <property name="header.render" value="false"/>
        <property name="entryPageId" value="student_academic_planner"/>
        <property name="formClass" value="org.kuali.student.myplan.plan.form.PlanForm"/>
        <property name="items">
            <list>
                <bean parent="Uif-Page" p:id="student_academic_planner_page" p:width="150px">
                    <property name="validationMessages">
                        <bean parent="Uif-GroupValidationMessages">
                            <property name="displayMessages" value="true"/>
                            <property name="displayFieldLabelWithMessages" value="false"/>
                        </bean>
                    </property>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-VerticalBoxGroup" p:style="border-bottom: dotted 1px #cfcfcf;">
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-Link" p:linkText="Messages (@{messagesCount})">
                                            <property name="href"
                                                      value="lookup?methodToCall=search&amp;viewId=MessagesDetail-LookupView"/>
                                            <property name="render" value="@{messagesCount NE 0}"/>
                                        </bean>
                                        <bean parent="Uif-MessageField" p:messageText="Messages (0)"
                                              p:cssClasses="myplan-text-gray">
                                            <property name="render" value="@{messagesCount EQ 0}"/>
                                        </bean>
                                        <bean parent="Uif-Link" p:linkText="Bookmarked Courses (@{bookmarkedCount})">
                                            <property name="href"
                                                      value="lookup?methodToCall=search&amp;viewId=SavedCoursesDetail-LookupView"/>
                                        </bean>
                                    </list>
                                </property>
                                <property name="propertyReplacers">
                                    <list>
                                        <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items"
                                              p:condition="T(org.kuali.student.myplan.utils.UserSessionHelper).isAdviser()">
                                            <property name="replacement">
                                                <list>
                                                    <bean parent="Uif-Message"
                                                          p:messageText="Adviser Access Restricted"/>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup" p:style="border-bottom: dotted 1px #cfcfcf;">
                                <property name="items">
                                    <list>
                                        <bean id="plan_access" parent="Uif-InputField" p:label="MyPlan Settings"
                                              p:labelPlacement="TOP"
                                              p:propertyName="enableAdviserView" p:width="auto">
                                            <property name="instructionalMessage">
                                                <bean parent="Uif-Message"
                                                      p:cssClasses="myplan-text-gray fl-font-size-80"
                                                      p:messageText="&quot;Shared&quot; plans are viewable by all UW advisers. &quot;Private&quot; plans are only viewable by you."/>
                                            </property>
                                            <property name="onChangeScript" value="
                                                myplanWriteHiddenToForm('methodToCall', 'planAccess', 'popupForm');
                                                jQuery('#popupForm').ajaxSubmit();
                                            "/>
                                            <property name="control">
                                                <bean parent="Uif-VerticalRadioControl">
                                                    <property name="options">
                                                        <list>
                                                            <bean parent="Uif-KeyLabelPair" p:key="true"
                                                                  p:value="Shared"/>
                                                            <bean parent="Uif-KeyLabelPair" p:key="false"
                                                                  p:value="Private"/>
                                                        </list>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-VerticalBoxGroup-NoMargin">
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-Link" p:linkText="Help">
                                            <property name="href"
                                                      value="javascript:openHelpWindow('http://depts.washington.edu/myplan/help-site/');"/>
                                        </bean>
                                        <bean parent="Uif-Link" p:linkText="Log out">
                                            <property name="href"
                                                      value="/@{#ConfigProperties['app.code']}/logout.do"/>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!--
         Popover Common Components  *************************************************************************************
    -->

    <bean id="courseTitleLink" parent="Uif-Link" p:width="280px" p:style="display:block;">
        <property name="linkText"
                  value="@{courseSummaryDetails.code} @{courseSummaryDetails.courseTitle} (@{courseSummaryDetails.credit})"/>
        <property name="title"
                  value="@{courseSummaryDetails.code.replaceAll(&quot;( )+&quot;, &quot; &quot;)} @{courseSummaryDetails.courseTitle} (@{courseSummaryDetails.credit})"/>
        <property name="href"
                  value="inquiry?methodToCall=start&amp;viewId=CourseDetails-InquiryView&amp;courseId=@{courseSummaryDetails.courseId}"/>
        <property name="cssClasses">
            <list merge="true">
                <value>fl-text-bold</value>
                <value>myplan-text-wrap</value>
            </list>
        </property>
    </bean>

    <!-- Select control for choosing a term -->
    <bean id="courseTermSelection" parent="KSAP-HorizontalFieldGroup"
          p:label="Quarter &amp; Year" p:labelPlacement="TOP">
        <property name="fieldLabel.cssClasses" value="myplan-text-normal"/>
        <property name="items">
            <list>
                <bean parent="KSAP-SimpleInputField" p:propertyName="atpId"
                      p:width="120px">
                    <property name="control">
                        <bean parent="Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.myplan.plan.util.TermsListBuilder"/>
                    </property>
                </bean>
                <bean parent="KSAP-Message" p:width="160px"
                      p:messageText="Note: This course MAY NOT be offered in your selected quarter. Check back after the Time Schedule is released.">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>fl-font-size-80</value>
                            <value>fl-text-gray</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!-- List of terms course is scheduled for -->
    <bean id="courseTermsScheduled" parent="KSAP-SimpleDataField" p:label="Scheduled For"
          p:propertyName="courseSummaryDetails">
        <property name="fieldLabel">
            <bean parent="Uif-Label"/>
        </property>
        <property name="fieldLabel.cssClasses" value="fl-text-gray fl-font-size-90 myplan-text-normal"/>
        <property name="escapeHtmlInPropertyValue" value="false"/>
        <property name="propertyEditor" ref="scheduled_terms_list_formatter"/>
        <property name="cssClasses">
            <list merge="true">
                <value>myplan-data-list</value>
            </list>
        </property>
    </bean>

    <!--  Backup checkbox -->
    <bean id="courseMarkAsBackup" parent="KSAP-HorizontalFieldGroup">
        <property name="items">
            <list>
                <bean id="checkbox_backup" parent="KSAP-SimpleInputField" p:propertyName="backup" p:defaultValue="false"
                      p:label="Mark as [b]'Backup'[/b] course."
                      p:labelPlacement="RIGHT">
                    <property name="fieldLabel.render" value="true"/>
                    <property name="fieldLabel.cssClasses" value="myplan-text-normal"/>
                    <property name="control">
                        <bean parent="Uif-CheckboxControl"/>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!-- Text input for plan item notes field -->
    <bean id="planItemNote" parent="KSAP-SimpleInputField" p:propertyName="note"
          p:defaultValue="@{#form.planItemId NE null ? #form.note : ''}">
        <property name="label" value="Notes"/>
        <property name="fieldLabel.render" value="true"/>
        <property name="fieldLabel.cssClasses">
            <list merge="true">
                <value>myplan-text-normal</value>
            </list>
        </property>
        <property name="labelPlacement" value="TOP"/>
        <property name="control">
            <bean parent="Uif-TextAreaControl"
                  p:watermarkText="Enter a short note (500 characters max)" p:maxLength="500"
                  p:style="resize:none; width:97%">
                <property name="required" value="@{#form.generalPlaceholder EQ 'other'}"/>
                <property name="cssClasses">
                    <list merge="true">
                        <value>ksap-characterCount</value>
                    </list>
                </property>
            </bean>
        </property>
        <property name="constraintMessage">
            <bean parent="KSAP-Message" p:messageText="characters remaining">
                <property name="onDocumentReadyScript" value="jQuery('.ksap-characterCount').characterCount();"/>
                <property name="cssClasses">
                    <list merge="true">
                        <value>counter</value>
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <!-- Option list of credit values for placeholders -->
    <bean id="dropdownPlaceholderCredits" parent="Uif-DropdownControl" p:disabled="false">
        <property name="options">
            <list>
                <bean parent="Uif-KeyLabelPair" p:key="" p:value="Credit"/>
                <bean parent="Uif-KeyLabelPair" p:key="1" p:value="1"/>
                <bean parent="Uif-KeyLabelPair" p:key="2" p:value="2"/>
                <bean parent="Uif-KeyLabelPair" p:key="3" p:value="3"/>
                <bean parent="Uif-KeyLabelPair" p:key="4" p:value="4"/>
                <bean parent="Uif-KeyLabelPair" p:key="5" p:value="5"/>
                <bean parent="Uif-KeyLabelPair" p:key="6" p:value="6"/>
                <bean parent="Uif-KeyLabelPair" p:key="7" p:value="7"/>
                <bean parent="Uif-KeyLabelPair" p:key="8" p:value="8"/>
                <bean parent="Uif-KeyLabelPair" p:key="9" p:value="9"/>
                <bean parent="Uif-KeyLabelPair" p:key="10" p:value="10"/>
                <bean parent="Uif-KeyLabelPair" p:key="11" p:value="11"/>
                <bean parent="Uif-KeyLabelPair" p:key="12" p:value="12"/>
                <bean parent="Uif-KeyLabelPair" p:key="13" p:value="13"/>
                <bean parent="Uif-KeyLabelPair" p:key="14" p:value="14"/>
                <bean parent="Uif-KeyLabelPair" p:key="15" p:value="15"/>
                <bean parent="Uif-KeyLabelPair" p:key="16" p:value="16"/>
                <bean parent="Uif-KeyLabelPair" p:key="17" p:value="17"/>
                <bean parent="Uif-KeyLabelPair" p:key="18" p:value="18"/>
                <bean parent="Uif-KeyLabelPair" p:key="19" p:value="19"/>
                <bean parent="Uif-KeyLabelPair" p:key="20" p:value="20"/>
                <bean parent="Uif-KeyLabelPair" p:key="21" p:value="21"/>
                <bean parent="Uif-KeyLabelPair" p:key="22" p:value="22"/>
                <bean parent="Uif-KeyLabelPair" p:key="23" p:value="23"/>
                <bean parent="Uif-KeyLabelPair" p:key="24" p:value="24"/>
                <bean parent="Uif-KeyLabelPair" p:key="25" p:value="25"/>
            </list>
        </property>
    </bean>

    <!-- Placeholder DIV for error messages after submission failure -->
    <bean id="errorPlaceholder" parent="KSAP-SimpleInputField" p:id="errorPlaceholder" p:hidden="true"
          p:propertyName="courseSummaryDetails.courseId">
        <property name="control">
            <bean parent="Uif-HiddenControl"/>
        </property>
    </bean>

    <!--
         Popover Action Buttons  *************************************************************************************
    -->

    <!--  Add to plan button. Used contextually in course details popup actions -->
    <bean id="addToPlanButton" parent="Uif-PrimaryActionButton-Small" p:id="addToPlanButton" p:actionLabel="Add to Plan"
          p:actionImagePlacement="RIGHT">
        <property name="actionScript"
                  value="fnPopoverSlider('add_planned_course_fields', 'course_popover_group', 'left');"/>
        <property name="actionImage">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.myplan.externalizable.images.url']}pixel.gif">
                <property name="cssClasses">
                    <list merge="true">
                        <value>rightArrowSmall</value>
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <!--  Add to saved courses. Used contextually in course details popup actions -->
    <bean id="addSavedCourseButton" parent="Uif-SecondaryActionButton-Small" p:id="addSavedCourseButton"
          p:actionLabel="Bookmark Course">
        <property name="onDocumentReadyScript" value="
            jQuery('#addSavedCourseButton').on('PLAN_ITEM_ADDED', function(event, data){
                if (data.planItemType === 'wishlist') {
                    fnDisplayMessage(data.message, data.cssClass, 'addSavedCourseButton', true);
                }
            });
        "/>
        <property name="actionScript" value="
            var additionalFormData = {viewId:'PlannedCourse-FormView', methodToCall:'addSavedCourse', courseId:'@{courseSummaryDetails.courseId}'};
            submitPopupForm(additionalFormData, e, false);
        "/>
    </bean>

    <!-- Remove from saved courses list button. -->
    <bean id="removeSavedCourseButton" parent="Uif-SecondaryActionButton-Small" p:id="removeSavedCourseButton"
          p:actionLabel="Delete">
        <property name="actionScript"
                  value="fnPopoverSlider('delete_from_list_confirmation','course_popover_group','left');"/>
    </bean>

    <!-- Cancel button to close popover -->
    <bean id="closePopoverCancel" parent="Uif-SecondaryActionButton-Small" p:id="closePopoverCancel"
          p:actionLabel="Cancel">
        <property name="actionScript"
                  value="fnCloseAllPopups();"/>
    </bean>

</beans>