<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <!--
     Copyright 2007-2009 The Kuali Foundation

     Licensed under the Educational Community License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

     http://www.opensource.org/licenses/ecl2.php

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
    -->


    <!--********************************************Lookup View**************************************************-->
    <bean id="SamplePlan-LookupView" parent="MyPlanLookupView">
        <property name="onLoadScript" value=""/>
        <property name="headerText" value="Plan"/>
        <property name="header.render" value="false"/>
        <property name="applicationHeader">
            <bean parent="KSAP-SamplePlanApplicationHeader"/>
        </property>
        <property name="viewName" value="SamplePlan-LookupView"/>
        <property name="dataObjectClassName"
                  value="org.kuali.student.myplan.sampleplan.dataobject.SamplePlanDataObject"/>
        <property name="viewHelperServiceClass"
                  value="org.kuali.student.myplan.sampleplan.service.SamplePlanLookupableHelperImpl"/>
        <property name="singlePageView" value="true"/>
        <property name="page.header.render" value="false"/>
        <property name="page">
            <bean parent="KSAP-Page" p:id="sample_plan_detail_page">
                <property name="items">
                    <list>
                        <ref bean="sample_plan_detail"/>
                    </list>
                </property>
            </bean>
        </property>
        <!-- Not Displaying any criteria -->
        <property name="criteriaGroup">
            <bean parent="KSAP-VerticalBoxGroup">
                <property name="footer">
                    <bean parent="KSAP-EmptyLookupCriteriaFooter"/>
                </property>
            </bean>
        </property>
        <property name="criteriaFields">
            <list/>
        </property>
        <property name="resultFields">
            <list/>
        </property>
        <property name="footer.render" value="false"/>
    </bean>

    <bean id="sample_plan_detail" parent="KSAP-VerticalBoxGroup" p:width="950px">
        <property name="items">
            <list>
                <bean parent="KSAP-HeaderTwo" p:headerText="Sample Plans" p:cssClasses="planNavigation__header"/>
                <bean parent="KSAP-HorizontalBoxGroup" p:cssClasses="planNavigation">
                    <property name="items">
                        <list>
                            <ref bean="create"/>
                            <ref bean="publish"/>
                            <ref bean="delete"/>
                        </list>
                    </property>
                </bean>
                <ref bean="sample_detail_list"/>
            </list>
        </property>
    </bean>

    <bean id="sample_detail_list" parent="Uif-TableCollectionSection" p:layoutManager.numberOfColumns="7">
        <property name="headerText" value="Sample Plans"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.sampleplan.dataobject.SamplePlanDataObject"/>
        <property name="propertyName" value="lookupResults"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="layoutManager.renderSequenceField" value="false"/>
        <property name="header.render" value="false"/>
        <property name="layoutManager.applyDefaultCellWidths" value="false"/>
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <entry key="bJQueryUI" value="true"/>
                <entry key="sDom" value="irtp"/>
                <entry key="aaSorting" value="[]"/>
                <entry key="bSortClasses" value="false"/>
                <entry key="bDeferRender" value="true"/>
                <entry key="bAutoWidth" value="false"/>
                <entry key="aoColumns"
                       value="[
                            {'sTitle':'','bSortable':true,'sWidth':'5%'},
                            {'sTitle':'Name','bSortable':true,'sWidth':'25%'},
                            {'sTitle':'Status','bSortable':false,'sWidth':'5%'},
                            {'sTitle':'Last Updated','bSortable':true,'sWidth':'20%','sType':'longdate'},
                            {'sTitle':'Last Created','bSortable':true,'sWidth':'20%','sType':'longdate'},
                            {'sTitle':'Created By','bSortable':true,'sWidth':'10%'},
                            {'sTitle':'Actions','bSortable':true,'sWidth':'15%'}
                        ]"/>
                <entry key="sPaginationType" value="full_numbers"/>
                <entry key="fnDrawCallback"
                       value="function() {
                            if ( Math.ceil((this.fnSettings().fnRecordsDisplay()) / this.fnSettings()._iDisplayLength ) > 1)  {
                                jq('.dataTables_paginate .ui-button').not('.first, .last').show();
                            } else {
                                jq('.dataTables_paginate .ui-button').hide();
                            }
                       }"/>
            </map>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="learningPlanId" p:label="">
                    <property name="control">
                        <bean parent="Uif-CheckboxControl">
                            <property name="onChangeScript" value="alert('checkbox clicked')"/>
                        </bean>
                    </property>
                </bean>
                <bean parent="Uif-LinkField" p:label="Name">
                    <property name="linkText" value="@{#line.degreeProgramTitle} - @{#line.planTitle}"/>
                    <property name="title" value="@{#line.degreeProgramTitle} - @{#line.planTitle}"/>
                    <property name="href"
                              value="samplePlan?methodToCall=startNew&amp;viewId=SamplePlan-FormView&amp;learningPlanId=@{#line.learningPlanId}&amp;preview=true"/>
                </bean>
                <bean parent="Uif-DataField" p:propertyName="status" p:label="Status"/>
                <bean parent="Uif-DataField" p:propertyName="lastUpdated" p:label="Last Updated"/>
                <bean parent="Uif-DataField" p:propertyName="lastCreated" p:label="Last Created"/>
                <bean parent="Uif-DataField" p:propertyName="createdBy" p:label="Created By"/>
                <bean parent="Uif-HorizontalFieldGroup" p:label="Actions">
                    <property name="group.validationMessages">
                        <null/>
                    </property>
                    <property name="items">
                        <list>
                            <ref bean="preview"/>
                            <ref bean="edit"/>
                            <ref bean="copy"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>


    <!--**********************************************************************************************Form View****************************************************************************************************-->
    <bean id="SamplePlan-FormView" parent="MyPlanFormView">
        <property name="id" value="SamplePlan-FormView"/>
        <property name="header.render" value="false"/>
        <property name="applicationHeader">
            <bean parent="KSAP-SamplePlanApplicationHeader"/>
        </property>
        <property name="entryPageId" value="sample_plan_create_page"/>
        <property name="items">
            <list>
                <!--********************************************Sample Plan Create/Edit Page**************************************************-->
                <bean parent="Uif-Page" p:id="sample_plan_create_page"
                      p:headerText="Create Sample Plan">
                    <property name="instructionalMessage">
                        <bean parent="KSAP-Message" p:cssClasses="">
                            <property name="messageText"
                                      value="FPO: Enter course code or placeholders for each quarter. Course Credits will be pulled and displayed from Course Catalog when saved for each course.
                                      Credit total for each quarter will be tallied when you click 'Save &amp; Proceed'. After filling the sample plan review and publish it for students to bring into their academic plan."/>
                        </bean>
                    </property>
                    <property name="cssClasses">
                        <list merge="true">
                            <value>fl-container-950</value>
                        </list>
                    </property>
                    <property name="header">
                        <bean parent="Uif-HeaderTwo"/>
                    </property>
                    <property name="layoutManager">
                        <bean parent="Uif-VerticalBoxLayout"/>
                    </property>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-VerticalBoxGroup">
                                <property name="items">
                                    <list>
                                        <ref bean="sample_plan_panel"/>
                                        <ref bean="sample_plan_table"/>
                                        <ref bean="sample_plan_general_notes"/>
                                        <ref bean="sample_plan_main_actions"/>
                                        <bean parent="KSAP-SimpleInputField" p:propertyName="learningPlanId"
                                              p:hidden="true">
                                            <property name="control">
                                                <bean parent="Uif-HiddenControl"/>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>

                <!--********************************************Sample Plan Preview Page**************************************************-->
                <bean parent="Uif-Page" p:id="sample_plan_preview_page"
                      p:headerText="@{degreeProgramTitle}: @{planTitle}">
                    <property name="instructionalMessage">
                        <bean parent="KSAP-Message" p:cssClasses="">
                            <property name="messageText"
                                      value="FPO: Sample plan starting from the Plan title below is what a student would see when previewing in MyPlan."/>
                        </bean>
                    </property>
                    <property name="cssClasses">
                        <list merge="true">
                            <value>fl-container-950</value>
                        </list>
                    </property>
                    <property name="header">
                        <bean parent="Uif-HeaderTwo"/>
                    </property>
                    <property name="layoutManager">
                        <bean parent="Uif-VerticalBoxLayout"/>
                    </property>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-VerticalBoxGroup">
                                <property name="items">
                                    <list>
                                        <ref bean="sample_plan_panel"/>
                                        <ref bean="sample_plan_table"/>
                                        <ref bean="sample_plan_general_notes"/>
                                        <ref bean="sample_plan_main_actions"/>
                                        <bean parent="KSAP-SimpleInputField" p:propertyName="learningPlanId"
                                              p:hidden="true">
                                            <property name="control">
                                                <bean parent="Uif-HiddenControl"/>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="footer.render" value="false"/>
        <property name="formClass" value="org.kuali.student.myplan.sampleplan.form.SamplePlanForm"/>
    </bean>


    <bean id="sample_plan_panel" parent="KSAP-VerticalBoxGroup" p:style="margin-top: 10px;margin-bottom: 10px;">
        <property name="cssClasses" value="courseSearch__query"/>
        <property name="items">
            <list>
                <!--Elements for Edit mode-->
                <ref bean="sample_plan_options"/>
                <bean id="description_textbox" parent="Uif-InputField" p:propertyName="description"
                      p:fieldLabel.render="false" p:render="@{!preview}">
                    <property name="control">
                        <bean parent="Uif-TextAreaControl" p:rows="2" p:cols="120" p:textExpand="false"
                              p:style="resize:none;"
                              p:watermarkText="Enter a short  description about this sample plan ...">
                            <property name="cssClasses">
                                <list merge="true">
                                    <value>fl-container-500</value>
                                </list>
                            </property>
                        </bean>
                    </property>
                </bean>

                <!--ReadOnly for Preview mode-->
                <bean parent="KSAP-MessageField" p:messageText="@{degreeProgramTitle}: @{planTitle}"
                      p:render="@{preview}">
                    <property name="cssClasses" value="planItem__title"/>
                </bean>
                <bean parent="KSAP-MessageField" p:messageText="@{description}" p:labelPlacement="TOP"
                      p:label="Sample Plan Description" p:render="@{preview}"/>
            </list>
        </property>
    </bean>


    <bean id="sample_plan_options" parent="KSAP-HorizontalBoxGroup" p:render="@{!preview}">
        <property name="items">
            <list>
                <bean parent="KSAP-SimpleInputField"
                      p:propertyName="degreeProgramTitle" p:width="auto">
                    <property name="control">
                        <bean parent="Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.myplan.sampleplan.util.ProgramKeyValues"/>
                    </property>
                </bean>
                <bean id="searchQuery" parent="Uif-InputField" p:propertyName="planTitle">
                    <property name="fieldLabel.render" value="false"/>
                    <property name="control">
                        <bean parent="Uif-TextControl" p:watermarkText="e.g. Track 1">
                            <property name="cssClasses" value="courseSearch__field"/>
                        </bean>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="sample_plan_general_notes" parent="KSAP-VerticalBoxGroup" p:style="margin-top: 10px;margin-bottom: 10px;"
          p:render="@{samplePlanYears.size() gt 0}">
        <property name="cssClasses" value="courseSearch__query"/>
        <property name="items">
            <list>
                <!--Elements for Edit mode-->
                <bean parent="KSAP-MessageField" p:messageText="General Note from Adviser">
                    <property name="cssClasses" value="planItem__title"/>
                </bean>
                <bean id="general_notes_text_box" parent="Uif-InputField" p:propertyName="generalNotes"
                      p:fieldLabel.render="false" p:render="@{!preview}">
                    <property name="control">
                        <bean parent="Uif-TextAreaControl" p:rows="8" p:cols="120" p:textExpand="false"
                              p:watermarkText="Enter text...Unlimited!">
                            <property name="cssClasses">
                                <list merge="true">
                                    <value>fl-container-500</value>
                                </list>
                            </property>
                        </bean>

                    </property>
                </bean>
                <!--ReadOnly for Preview mode-->
                <bean parent="KSAP-MessageField" p:messageText="@{generalNotes}" p:render="@{preview}"/>
            </list>
        </property>
    </bean>

    <!--********************************************Main Sample Plan Form**************************************************-->

    <bean id="sample_plan_table" parent="KSAP-StackedCollectionGroup">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.sampleplan.dataobject.SamplePlanYear"/>
        <property name="propertyName" value="samplePlanYears"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="readOnly" value="false"/>
        <property name="items">
            <list>
                <bean parent="Uif-HorizontalFieldGroup" p:fieldLabel.render="false">
                    <property name="items">
                        <list>
                            <bean parent="KSAP-SimpleInputField" p:propertyName="yearName" p:readOnly="true">
                            </bean>
                            <bean p:id="add_summer_@{#line.year}" parent="Uif-LinkField">
                                <property name="linkText" value="ADD SU QTR"/>
                                <property name="title" value="ADD SU QTR"/>
                                <property name="href"
                                          value="#"/>
                                <property name="onClickScript"
                                          value="jQuery('#Summer_year_'+@{#line.year}).show();jQuery('#add_summer_'+@{#line.year}).hide();"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="KSAP-SimpleInputField" p:propertyName="year" p:hidden="true">
                    <property name="control">
                        <bean parent="Uif-HiddenControl"/>
                    </property>
                </bean>
                <bean parent="KSAP-SimpleInputField" p:propertyName="yearName" p:hidden="true">
                    <property name="control">
                        <bean parent="Uif-HiddenControl"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="sample_plan_terms"/>
            </list>
        </property>
    </bean>


    <bean id="sample_plan_terms" parent="KSAP-HorizontalStackedSubCollection-WithinSection">
        <property name="validationMessages">
            <null/>
        </property>
        <property name="readOnly" value="false"/>
        <property name="cssClasses" value="myplan-remove-margin"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.sampleplan.dataobject.SamplePlanTerm"/>
        <property name="propertyName" value="samplePlanTerms"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="disclosure.render" value="false"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="false"/>
        <property name="layoutManager.lineGroupPrototype.validationMessages">
            <null/>
        </property>
        <property name="layoutManager">
            <bean parent="KSAP-HorizontalStackedCollectionLayout">
                <property name="subCollectionFieldGroupPrototype">
                    <bean parent="Uif-HorizontalFieldGroup" p:style="width: 600px;padding-bottom: 5px;">
                    </bean>
                </property>
                <property name="lineGroupPrototype">
                    <bean p:id="@{#line.termName+'_year_'+#line.year}" parent="Uif-CollectionHorizontalBoxItem">
                        <property name="hidden" value="@{#index eq 3}"/>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-DataField" p:propertyName="termName">
                    <property name="fieldLabel.render" value="false"/>
                </bean>
                <bean parent="KSAP-SimpleInputField" p:propertyName="termName" p:hidden="true">
                    <property name="control">
                        <bean parent="Uif-HiddenControl"/>
                    </property>
                </bean>
                <bean parent="KSAP-SimpleInputField" p:propertyName="year" p:hidden="true">
                    <property name="control">
                        <bean parent="Uif-HiddenControl"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean parent="samplePlanItemsCollection"/>
            </list>
        </property>
    </bean>

    <bean id="samplePlanItemsCollection" parent="Uif-StackedSubCollection-WithinSection-parentBean" p:headerText="">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.sampleplan.dataobject.SamplePlanItem"/>
        <property name="propertyName" value="samplePlanItems"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="header">
            <bean parent="KSAP-HeaderSix" p:cssClasses="planPreview__itemsHeader"
                  p:headerTagCssClasses="planPreview__itemsHeaderText"/>
        </property>
        <property name="layoutManager">
            <bean parent="KSAP-HorizontalStackedCollectionLayout"/>
        </property>
        <property name="header.render"
                  value="false"/>
        <property name="items">
            <list>
                <bean parent="KSAP-HorizontalFieldGroup" p:style="padding-bottom: 5px;">
                    <property name="items">
                        <list>
                            <bean parent="Uif-InputField"
                                  p:propertyName="code" p:width="auto" p:render="@{!#form.preview}" p:readOnly="false">
                            </bean>
                            <bean parent="Uif-InputField"
                                  p:propertyName="credit" p:width="auto" p:render="@{!#form.preview}"
                                  p:readOnly="false">
                                <property name="control">
                                    <bean parent="dropDownCredits"/>
                                </property>
                            </bean>
                            <bean parent="Uif-InputField" p:propertyName="note" p:width="auto"
                                  p:render="@{!#form.preview}" p:readOnly="false"/>
                            <!--ReadOnly for Preview mode-->
                            <bean parent="KSAP-MessageField" p:messageText="@{#line.code} (@{#line.credit})"
                                  p:render="@{#form.preview}"/>
                            <bean parent="KSAP-MessageField" p:messageText="@{#line.note}" p:render="@{#form.preview}"/>

                            <bean parent="KSAP-SimpleInputField" p:propertyName="planItemId" p:hidden="true">
                                <property name="control">
                                    <bean parent="Uif-HiddenControl"/>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="dropDownCredits" parent="Uif-DropdownControl" p:disabled="false">
        <property name="options">
            <list>
                <bean parent="Uif-KeyLabelPair" p:key="" p:value="Credit"/>
                <bean parent="Uif-KeyLabelPair" p:key="1" p:value="1"/>
                <bean parent="Uif-KeyLabelPair" p:key="2" p:value="2"/>
                <bean parent="Uif-KeyLabelPair" p:key="3" p:value="3"/>
                <bean parent="Uif-KeyLabelPair" p:key="4" p:value="4"/>
                <bean parent="Uif-KeyLabelPair" p:key="5" p:value="5"/>
                <bean parent="Uif-KeyLabelPair" p:key="6" p:value="6"/>
                <bean parent="Uif-KeyLabelPair" p:key="7" p:value="7"/>
                <bean parent="Uif-KeyLabelPair" p:key="8" p:value="8"/>
                <bean parent="Uif-KeyLabelPair" p:key="9" p:value="9"/>
                <bean parent="Uif-KeyLabelPair" p:key="10" p:value="10"/>
                <bean parent="Uif-KeyLabelPair" p:key="11" p:value="11"/>
                <bean parent="Uif-KeyLabelPair" p:key="12" p:value="12"/>
                <bean parent="Uif-KeyLabelPair" p:key="13" p:value="13"/>
                <bean parent="Uif-KeyLabelPair" p:key="14" p:value="14"/>
                <bean parent="Uif-KeyLabelPair" p:key="15" p:value="15"/>
                <bean parent="Uif-KeyLabelPair" p:key="16" p:value="16"/>
                <bean parent="Uif-KeyLabelPair" p:key="17" p:value="17"/>
                <bean parent="Uif-KeyLabelPair" p:key="18" p:value="18"/>
                <bean parent="Uif-KeyLabelPair" p:key="19" p:value="19"/>
                <bean parent="Uif-KeyLabelPair" p:key="20" p:value="20"/>
                <bean parent="Uif-KeyLabelPair" p:key="21" p:value="21"/>
                <bean parent="Uif-KeyLabelPair" p:key="22" p:value="22"/>
                <bean parent="Uif-KeyLabelPair" p:key="23" p:value="23"/>
                <bean parent="Uif-KeyLabelPair" p:key="24" p:value="24"/>
                <bean parent="Uif-KeyLabelPair" p:key="25" p:value="25"/>
            </list>
        </property>
    </bean>


    <!--********************************************Actions Buttons**************************************************-->
    <bean id="sample_plan_main_actions" parent="KSAP-HorizontalBoxGroup"
          p:style="margin-top: 10px;margin-bottom: 10px;">
        <property name="items">
            <list>
                <bean parent="KSAP-PrimaryActionButton" p:methodToCall="saveSamplePlan"
                      p:actionLabel="SAVE &amp; PROCEED"
                      p:render="@{!preview}"/>
                <bean parent="KSAP-PrimaryActionButton" p:methodToCall="saveSamplePlan" p:actionLabel="SAVE PROGRESS"
                      p:render="@{!preview}"/>
                <bean parent="edit"
                      p:href="samplePlan?methodToCall=startNew&amp;viewId=SamplePlan-FormView&amp;learningPlanId=@{learningPlanId}"
                      p:render="@{preview}"/>
            </list>
        </property>
    </bean>

    <bean id="create" parent="Uif-LinkField">
        <property name="linkText" value="Create"/>
        <property name="title" value="Create"/>
        <property name="href"
                  value="samplePlan?methodToCall=startNew&amp;viewId=SamplePlan-FormView"/>
    </bean>

    <bean id="preview" parent="Uif-LinkField">
        <property name="linkText" value="Preview"/>
        <property name="title" value="Preview"/>
        <property name="href"
                  value="samplePlan?methodToCall=startNew&amp;viewId=SamplePlan-FormView&amp;pageId=sample_plan_preview_page&amp;preview=true&amp;learningPlanId=@{#line.learningPlanId}"/>
    </bean>

    <bean id="publish" parent="Uif-LinkField">
        <property name="linkText" value="Publish"/>
        <property name="title" value="Publish"/>
        <property name="href"
                  value="#"/>
    </bean>

    <bean id="delete" parent="Uif-LinkField">
        <property name="linkText" value="Delete"/>
        <property name="title" value="Delete"/>
        <property name="href"
                  value="#"/>
    </bean>

    <bean id="copy" parent="Uif-LinkField">
        <property name="linkText" value="Copy"/>
        <property name="title" value="Copy"/>
        <property name="href"
                  value="#"/>
    </bean>

    <bean id="audit" parent="Uif-LinkField">
        <property name="linkText" value="Audit"/>
        <property name="title" value="Audit"/>
        <property name="href"
                  value="#"/>
    </bean>

    <bean id="edit" parent="Uif-LinkField">
        <property name="linkText" value="Edit"/>
        <property name="title" value="Edit"/>
        <property name="href"
                  value="samplePlan?methodToCall=startNew&amp;viewId=SamplePlan-FormView&amp;learningPlanId=@{#line.learningPlanId}"/>
    </bean>

</beans>
