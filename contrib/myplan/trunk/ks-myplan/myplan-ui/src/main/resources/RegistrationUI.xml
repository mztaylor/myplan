<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <!--
     Copyright 2007-2009 The Kuali Foundation

     Licensed under the Educational Community License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

     http://www.opensource.org/licenses/ecl2.php

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
    -->

    <bean id="Registration-FormView" p:viewName="Registration-FormView" parent="MyPlanBaseFormView">
        <property name="formClass" value="org.kuali.student.myplan.registration.form.DefaultRegistrationForm"/>
        <property name="entryPageId" value="scheduleView"/>
        <property name="persistFormToSession" value="true"/>
        <property name="additionalScriptFiles">
            <list>
                <value>themes/ksap/scripts/ksap.sbcalendar.js?@{#ConfigProperties['myplan.version']}</value>
            </list>
        </property>
        <property name="items">
            <list>
                <bean id="scheduleView" parent="KSAP-PageVerticalLayout">
                    <property name="width" value="894px"/>
                    <property name="style" value="margin:0 auto;"/>
                    <property name="onDocumentReadyScript" value="setLightboxScrollable(); parent.jQuery.fancybox.update();"/>
                    <property name="header">
                        <bean id="scheduleRegisterHeader" parent="KSAP-HeaderTwo" p:headerText="Schedule Details"/>
                    </property>
                    <property name="header.render" value="true"/>
                    <property name="instructionalMessage">
                        <bean parent="KSAP-Message" p:cssClasses="uif-boxLayoutVerticalItem" p:messageText="[p]This list shows the scheduled meeting days and times for courses in your plan for this quarter. If your registration period is open, select the &quot;Register for These Courses&quot; button to choose and submit SLNs.[/p][p]Period 1 priority registration for @{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToTermName(termId)} begins on @{registrationDetails.getRegistrationOpenDate()}. [0][/p]">
                            <property name="inlineComponents">
                                <list>
                                    <bean parent="registrationDateLink"/>
                                </list>
                            </property>
                        </bean>
                    </property>
                    <property name="layoutManager.style" value="overflow-x: hidden; overflow-y: scroll; padding-right: 24px;"/>
                    <property name="items">
                        <list>
                            <bean parent="scheduleRegisteredItems"/>
                            <bean parent="schedulePlannedItemsView"/>
                        </list>
                    </property>
                    <property name="footer">
                        <bean id="scheduleViewFooter" parent="KSAP-HorizontalBoxGroup">
                            <property name="cssClasses" value="registrationForm__footer"/>
                            <property name="layoutManager.style" value="height: 40px;"/>
                            <property name="render"
                                      value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser()}"/>
                            <property name="componentSecurity.additionalRoleQualifiers">
                                <map>
                                    <entry key="authorizedToView" value="STUDENT,NON-STUDENT"/>
                                </map>
                            </property>
                            <property name="items">
                                <list>
                                    <bean parent="KSAP-SecondaryActionButton-Small" p:id="registrationUnpin" p:actionLabel="Unpin this schedule"
                                          p:render="@{pinned}">
                                        <property name="actionScript"
                                                  value="KsapScheduleBuild.confirmRemovedSavedSchedule('@{uniqueId}', true, e)"/>
                                        <property name="onDocumentReadyScript" value="jQuery('#registrationUnpin').focus()"/>
                                    </bean>
                                    <bean parent="KSAP-PrimaryActionButton-Small" p:actionLabel="Register for These Courses"
                                          p:navigateToPageId="scheduleSelect"
                                          p:style="float: right;"
                                          p:render="@{registrationDetails.openForRegistration}">
                                        <property name="cssClasses">
                                            <list merge="true">
                                                <value>@{registrationDetails.activitiesAvailable ? '' : 'disabled'}
                                                </value>
                                            </list>
                                        </property>
                                    </bean>
                                </list>
                            </property>
                        </bean>
                    </property>
                </bean>
                <bean id="scheduleSelect" parent="KSAP-PageVerticalLayout">
                    <property name="width" value="894px"/>
                    <property name="style" value="margin:0 auto;"/>
                    <property name="render"
                              value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser()}"/>
                    <property name="onDocumentReadyScript" value="
                        setLightboxScrollable();
                        parent.jQuery.fancybox.update();
                        updateRegistrationUrl('sendToRegistration');
                        jQuery('.registrationForm__group').find(':radio').each(function(){
                            var name = jQuery(this).attr('name').replace(/\.plannedCourses\[(\d*)\].*/gi, '.plannedCourses[$1].selectedForRegistration');
                            if (jQuery(document.getElementsByName(name)).is(':checked')) {
                                jQuery(this).attr('disabled', false);
                            } else {
                                jQuery(this).attr('disabled', true);
                            }
                        });
                    "/>
                    <property name="header">
                        <bean parent="KSAP-HeaderTwo" p:headerText="@{forRegistration ? '':'Review Sections and '}Register"/>
                    </property>
                    <property name="header.render" value="true"/>
                    <property name="instructionalMessage">
                        <bean parent="KSAP-Message" p:cssClasses="uif-boxLayoutVerticalItem" p:messageText="[p]Review the chosen courses and sections below to ensure they are the ones you want to send to registration. When finished, use the &quot;Register&quot; button to submit selected course sections.[/p][p]Period 1 priority registration for @{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToTermName(termId)} begins on @{registrationDetails.getRegistrationOpenDate()}. [0][/p]">
                            <property name="inlineComponents">
                                <list>
                                    <bean parent="registrationDateLink"/>
                                </list>
                            </property>
                        </bean>
                    </property>
                    <property name="layoutManager.style" value="overflow-x: hidden; overflow-y: scroll; padding-right: 24px;"/>
                    <property name="items">
                        <list>
                            <bean parent="scheduleRegisteredItems"/>
                            <bean parent="schedulePlannedItemsSelect"/>
                        </list>
                    </property>
                    <property name="footer">
                        <bean id="scheduleSelectFooter" parent="KSAP-HorizontalBoxGroup">
                            <property name="cssClasses" value="registrationForm__footer"/>
                            <property name="layoutManager.style" value="height: 40px;"/>
                            <property name="items">
                                <list>
                                    <bean parent="KSAP-SecondaryActionButton-Small" p:id="registrationBack" p:actionLabel="Back"
                                          p:navigateToPageId="scheduleView"
                                          p:additionalCssClasses="registrationForm__back"
                                          p:render="@{!forRegistration}">
                                        <property name="onDocumentReadyScript" value="jQuery('#registrationBack').focus()"/>
                                    </bean>
                                    <bean parent="KSAP-HorizontalBoxGroup">
                                        <property name="componentSecurity.additionalRoleQualifiers">
                                            <map>
                                                <entry key="authorizedToView" value="STUDENT"/>
                                            </map>
                                        </property>
                                        <property name="style" value="float: right;"/>
                                        <property name="items">
                                            <list>
                                                <bean parent="Uif-LinkField">
                                                    <property name="link">
                                                        <bean parent="Uif-Link" id="sendToRegistration"
                                                              p:id="sendToRegistration">
                                                            <property name="linkText" value="Register"/>
                                                            <property name="title" value="Register"/>
                                                            <property name="href"
                                                                      value="@{registrationDetails.registrationUrl}"/>
                                                            <property name="cssClasses"
                                                                      value="btn btn-primary btn-small @{registrationDetails.registrationUrl EQ null ? 'disabled':''}"/>
                                                            <property name="target" value="_blank"/>
                                                            <property name="onClickScript" value="if(jQuery(this).hasClass('disabled')){return false;} actionInvokeHandler(this);"/>
                                                            <property name="dataAttributes">
                                                                <map>
                                                                    <entry key="ajaxsubmit" value="true"/>
                                                                    <entry key="validate" value="false"/>
                                                                    <entry key="submit_data"
                                                                           value="{&quot;methodToCall&quot;:&quot;navigate&quot;,&quot;actionParameters[navigateToPageId]&quot;:&quot;scheduleCompleted&quot;,&quot;focusId&quot;:&quot;sendToRegistration&quot;,&quot;jumpToId&quot;:&quot;sendToRegistration&quot;}"/>
                                                                </map>
                                                            </property>
                                                        </bean>
                                                    </property>
                                                </bean>
                                            </list>
                                        </property>
                                    </bean>
                                </list>
                            </property>
                        </bean>
                    </property>
                </bean>
                <bean id="scheduleCompleted" parent="KSAP-PageVerticalLayout">
                    <property name="width" value="894px"/>
                    <property name="style" value="margin:0 auto;"/>
                    <property name="render"
                              value="@{!T(org.kuali.student.myplan.plan.util.AtpHelper).getUserSessionHelper().isAdviser()}"/>
                    <property name="onDocumentReadyScript" value="parent.jQuery.fancybox.update()"/>
                    <property name="header">
                        <bean parent="KSAP-HeaderTwo" p:headerText="Check Schedule Status"/>
                    </property>
                    <property name="header.render" value="true"/>
                    <property name="items">
                        <list>
                            <bean parent="KSAP-InfoMessage">
                                <property name="items">
                                    <list>
                                        <bean parent="KSAP-NoSpanMessage"
                                              p:messageText="A response from the registration system will open in a new browser window or tab."/>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-Message" p:cssClasses="block"
                                  p:messageText="[p][b]If your submission was accepted, you&#39;ll see your updated schedule on MyPlan within a few minutes.[/b][/p][p][b]If your submission was unsuccessful, try one of the following steps:[b][/p][br /][color=#666][ul][li]Use &quot;Edit schedule&quot; to change the sections that weren't accepted[/li][li]Check the registration page to see which errors need to be resolved[/li][li]Try to [0][/li][li]Close this window and send SLNs from a different pinned schedule[/li][/ul][/color]">
                                <property name="inlineComponents">
                                    <list>
                                        <bean parent="Uif-Link" p:style="text-decoration:underline" p:linkText="resend your SLNs" p:target="_blank"
                                              p:href="@{registrationDetails.registrationUrl}">
                                            <property name="title" value="Send SLNs to Registration"/>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                    <property name="footer">
                        <bean parent="KSAP-HorizontalBoxGroup">
                            <property name="cssClasses" value="registrationForm__footer"/>
                            <property name="layoutManager.style" value="height: 40px;"/>
                            <property name="items">
                                <list>
                                    <bean parent="KSAP-SecondaryActionButton-Small" p:id="registrationEdit" p:actionLabel="Edit schedule"
                                          p:navigateToPageId="scheduleSelect"
                                          p:additionalCssClasses="registrationForm__back" p:actionImagePlacement="LEFT">
                                        <property name="actionImage">
                                            <bean parent="Uif-Image" p:altText="this action lets you to edit the schedule which you can register for"
                                                  p:source="@{#ConfigProperties['ks.myplan.externalizable.images.url']}/pixel.gif"/>
                                        </property>
                                        <property name="onDocumentReadyScript" value="jQuery('#registrationEdit').focus()"/>
                                    </bean>
                                    <bean parent="KSAP-HorizontalBoxGroup">
                                        <property name="style" value="float: right;"/>
                                        <property name="items">
                                            <list>
                                                <bean parent="KSAP-PrimaryActionButton-Small" p:actionLabel="Close this window">
                                                    <property name="actionScript"
                                                              value="parent.jQuery.fancybox.close()"/>
                                                </bean>
                                            </list>
                                        </property>
                                    </bean>
                                </list>
                            </property>
                        </bean>
                    </property>
                </bean>
            </list>
        </property>
        <property name="header.render" value="false"/>
        <property name="footer.render" value="false"/>
    </bean>

    <bean id="scheduleRegisteredItems" parent="schedulePlannedItemsView">
        <property name="propertyName" value="registrationDetails.registeredCourses"/>
        <property name="render" value="@{registrationDetails.registeredCourses.size() GT 0}"/>
        <property name="layoutManager.lineGroupPrototype.additionalCssClasses" value="registrationForm__course--registered"/>
        <property name="instructionalMessage">
            <bean parent="KSAP-NoSpanMessage"/>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-HorizontalFieldGroup" p:cssClasses="registrationForm__courseTitle">
                    <property name="items">
                        <list>
                            <bean parent="KSAP-Message"
                                  p:messageText="[0] @{#line.courseCode} @{#line.courseTitle} (@{#line.credits})">
                                <property name="inlineComponents">
                                    <list>
                                        <bean parent="Uif-Image"
                                              p:source="@{#ConfigProperties['ks.myplan.externalizable.images.url']}/sb/icon_lock.png"/>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="KSAP-Message" p:messageText="Registered" p:cssClasses="registrationForm__courseTitle--registered"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean parent="scheduleRegistrationItemActivitiesRegistered"/>
            </list>
        </property>
        <property name="layoutManager.lineGroupPrototype.footer">
            <bean parent="KSAP-VerticalBoxGroup"/>
        </property>
        <property name="layoutManager.lineGroupPrototype.footer.render" value="false"/>
    </bean>

    <bean id="scheduleRegistrationItemActivitiesRegistered" parent="KSAP-TableCollectionGroup">
        <property name="propertyName" value="combinedActivities"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="readOnly" value="true"/>
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.schedulebuilder.dto.ActivityOptionInfo"/>
        <property name="layoutManager.numberOfColumns" value="6"/>
        <property name="cssClasses" value="registrationActivity__data"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv">
                <property name="upperGroup">
                    <bean parent="KSAP-HorizontalBoxGroup">
                        <property name="items">
                            <list>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Sect" p:width="24px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Type (Credit)" p:width="72px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Meeting Time" p:width="190px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Location" p:width="72px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Instructor" p:width="180px"/>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="items">
            <list>
                <bean parent="scheduleRegistrationActivityCode"/>
                <bean parent="scheduleRegistrationActivityType"/>
                <bean parent="scheduleRegistrationActivityMeetingDays"/>
                <bean parent="scheduleRegistrationActivityMeetingTime"/>
                <bean parent="scheduleRegistrationActivityMeetingLocation"/>
                <bean parent="scheduleRegistrationActivityInstructor"/>
            </list>
        </property>
    </bean>

    <bean id="schedulePlannedItemsView" parent="KSAP-StackedCollectionGroup">
        <property name="cssClasses" value="registrationForm__group"/>
        <property name="collectionObjectClass" value="org.kuali.student.myplan.schedulebuilder.dto.CourseOptionInfo"/>
        <property name="propertyName" value="registrationDetails.plannedCourses"/>
        <property name="render" value="@{registrationDetails.plannedCourses.size() GT 0}"/>
        <property name="instructionalMessage">
            <bean parent="KSAP-Message" p:messageText="[0] Add or Faculty code required" p:cssClasses="registrationForm__addCode">
                <property name="inlineComponents">
                    <list>
                        <bean parent="Uif-Image"
                              p:source="@{#ConfigProperties['ks.myplan.externalizable.images.url']}/pixel.gif"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="layoutManager.lineGroupPrototype.cssClasses" value="registrationForm__course"/>
        <property name="items">
            <list>
                <bean parent="Uif-LinkField" p:cssClasses="registrationForm__courseTitle"
                      p:linkText="@{#line.courseCode} @{#line.courseTitle} (@{#line.credits})">
                    <property name="href"
                              value="inquiry?methodToCall=start&amp;viewId=CourseDetails-InquiryView&amp;courseId=@{#line.courseId}&amp;courseCd=@{#line.courseCode}"/>
                    <property name="target" value="_blank"/>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean parent="scheduleRegistrationItemActivities"/>
            </list>
        </property>
        <property name="layoutManager.lineGroupPrototype.footer">
            <bean parent="KSAP-VerticalBoxGroup">
                <property name="cssClasses" value="alert alert-small alert-@{#line.possibleErrors NE null ? #line.possibleErrors.getErrorType() : 'no-error'} uif-boxLayoutVerticalItem"/>
                <property name="items">
                    <list>
                        <bean parent="KSAP-NoSpanMessage" p:messageText="@{#line.possibleErrors.getErrorMessage()}"/>
                    </list>
                </property>
            </bean>
        </property>
        <property name="layoutManager.lineGroupPrototype.footer.render" value="@{#line.possibleErrors NE null AND #line.possibleErrors.getErrorType() NE null}"/>
    </bean>

    <bean id="schedulePlannedItemsSelect" parent="schedulePlannedItemsView" p:readOnly="false">
        <property name="layoutManager.lineGroupPrototype.additionalCssClasses" value="@{!#line.selectedForRegistration ? 'disabled':''}"/>
        <property name="layoutManager.lineGroupPrototype.render" value="@{#line.activityOptions.size() GT 0}"/>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="selectedForRegistration" p:defaultValue="true" p:readOnly="false">
                    <property name="label" value="@{#line.courseCode} @{#line.courseTitle} (@{#line.credits})"/>
                    <property name="labelPlacement" value="RIGHT"/>
                    <property name="fieldLabel.renderColon" value="false"/>
                    <property name="cssClasses" value="registrationForm__courseTitle"/>
                    <property name="control">
                        <bean parent="Uif-CheckboxControl" p:readOnly="false">
                            <property name="onChangeScript" value="
                                if (jQuery(this).is(':checked')) {
                                    jQuery(this).parents('.registrationForm__course').removeClass('disabled').find(':radio').attr('disabled', false);
                                } else {
                                    jQuery(this).parents('.registrationForm__course').addClass('disabled').find(':radio').attr('disabled', true);
                                }
                            "/>
                        </bean>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean parent="scheduleRegistrationItemActivitySelect"/>
            </list>
        </property>
        <property name="layoutManager.lineGroupPrototype.footer.render" value="false"/>
    </bean>

    <bean id="scheduleRegistrationItemActivities" parent="KSAP-StackedHorizontalCollectionGroup">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.schedulebuilder.dto.ActivityOptionInfo"/>
        <property name="propertyName" value="combinedActivities"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="readOnly" value="true"/>
        <property name="cssClasses" value="registrationActivity__data"/>
        <property name="layoutManager.lineGroupPrototype.additionalCssClasses" value="registrationActivity__row"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv" p:render="@{#line NE null ? #line.activityOptions.size() GT 0 : true}">
                <property name="upperGroup">
                    <bean parent="KSAP-HorizontalBoxGroup">
                        <property name="items">
                            <list>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Sect" p:width="24px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="SLN" p:width="48px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Type (Credit)" p:width="72px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Meeting Time" p:width="190px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Location" p:width="72px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Instructor" p:width="180px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Enrl Restr" p:width="60px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Enrl Status" p:width="110px"/>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="items">
            <list>
                <bean parent="scheduleRegistrationActivityCode"/>
                <bean parent="scheduleRegistrationActivityRegCode"/>
                <bean parent="scheduleRegistrationActivityType"/>
                <bean parent="scheduleRegistrationActivityMeetingDays"/>
                <bean parent="scheduleRegistrationActivityMeetingTime"/>
                <bean parent="scheduleRegistrationActivityMeetingLocation"/>
                <bean parent="scheduleRegistrationActivityInstructor"/>
                <bean parent="scheduleRegistrationActivityInstituteCode"/>
                <bean parent="scheduleRegistrationActivityEnrollRestriction"/>
                <bean parent="scheduleRegistrationActivityEnrollment"/>
                <bean parent="scheduleRegistrationActivityEnrollStatus"/>
            </list>
        </property>
    </bean>

    <bean id="scheduleRegistrationItemActivitySelect" parent="KSAP-StackedCollectionGroup">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.schedulebuilder.dto.ActivityOptionInfo"/>
        <property name="propertyName" value="activityOptions"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="readOnly" value="false"/>
        <property name="cssClasses" value="registrationActivity__data @{forRegistration ? 'registrationActivity__data--noRadio':''}"/>
        <property name="header">
            <bean parent="KSAP-HeaderDiv">
                <property name="upperGroup">
                    <bean parent="KSAP-HorizontalBoxGroup">
                        <property name="layoutManager.style" value="margin: 0 0 0 @{forRegistration ? '0':'24px'};"/>
                        <property name="items">
                            <list>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Sect" p:width="24px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="SLN" p:width="48px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Type (Credit)" p:width="72px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Meeting Time" p:width="190px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Location" p:width="72px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Instructor" p:width="180px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Enrl Restr" p:width="60px"/>
                                <bean parent="scheduleRegistrationActivity-Label" p:labelText="Enrl Status" p:width="110px"/>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="items">
            <list>
                <bean id="registrationActivitySelection" parent="Uif-InputField" p:propertyName="selectedForReg">
                    <property name="control">
                        <bean parent="Uif-VerticalRadioControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.myplan.schedulebuilder.util.RegistrationKeyValueFinder"/>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <bean parent="plannedSecondaryActivityCollection"/>
            </list>
        </property>
    </bean>

    <bean id="plannedSecondaryActivityCollection" parent="KSAP-StackedCollectionGroup">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.schedulebuilder.dto.SecondaryActivityOptionsInfo"/>
        <property name="propertyName" value="secondaryOptions"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="readOnly" value="false"/>
        <property name="subCollections">
            <list>
                <bean parent="scheduleRegistrationItemActivitySelectSecondary"/>
            </list>
        </property>
    </bean>

    <bean id="scheduleRegistrationItemActivitySelectSecondary" parent="KSAP-StackedCollectionGroup">
        <property name="collectionObjectClass"
                  value="org.kuali.student.myplan.schedulebuilder.dto.ActivityOptionInfo"/>
        <property name="propertyName" value="activityOptions"/>
        <property name="bindingInfo.bindToForm" value="true"/>
        <property name="readOnly" value="false"/>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="selectedForReg">
                    <property name="control">
                        <bean parent="Uif-VerticalRadioControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.myplan.schedulebuilder.util.RegistrationKeyValueFinder"/>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="scheduleRegistrationActivity-Label" parent="Uif-Label" p:renderColon="false" p:labelForComponentId="registrationActivitySelection" p:cssClasses="registrationActivity__label"/>

    <bean id="scheduleRegistrationActivityCode" parent="KSAP-MessageField" p:messageText="@{#line.activityCode}"
          p:cssClasses="registrationActivity__code @{#form.getPlannedItems().containsKey(#line.activityOfferingId) ? 'registrationActivity__sectionCd--planned':''}"/>

    <bean id="scheduleRegistrationActivityType" parent="KSAP-MessageField"
          p:messageText="@{#line.activityTypeDescription}@{#line.primary EQ true ? ' (' + #line.courseCredit + ')' : ''}"
          p:cssClasses="registrationActivity__type"/>

    <bean id="scheduleRegistrationActivityMeetingDays" parent="KSAP-MessageField" p:messageText="@{#line.meetingDays}"
          p:cssClasses="registrationActivity__meetingDays"/>

    <bean id="scheduleRegistrationActivityMeetingTime" parent="KSAP-MessageField"
          p:messageText="@{!#line.tbd ? #line.meetingTimes : 'To be arranged'}"
          p:cssClasses="registrationActivity__meetingTime"/>

    <bean id="scheduleRegistrationActivityMeetingLocation" parent="KSAP-MessageField"
          p:messageText="@{#line.meetingLocation}" p:cssClasses="registrationActivity__meetingLocation"/>

    <bean id="scheduleRegistrationActivityInstructor" parent="KSAP-MessageField"
          p:messageText="@{#line.meetingInstructor}" p:cssClasses="registrationActivity__instructor"/>

    <bean id="scheduleRegistrationActivityRegCode" parent="Uif-LinkField" p:linkText="@{#line.registrationCode}"
          p:href="@{#ConfigProperties['ks.myplan.externalizable.sln.url']}@{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToQtrYrParam(#form.termId)}&amp;SLN=@{#line.registrationCode}"
          p:cssClasses="registrationActivity__regCode"
          p:target="_blank"/>

    <bean id="scheduleRegistrationActivityInstituteCode" parent="KSAP-MessageField"
          p:cssClasses="registrationActivity__instituteCode registrationActivity__instituteCode--@{#line.instituteName NE '' ? 'show':'hide'}"
          p:messageText="@{#line.instituteName}"/>

    <bean id="scheduleRegistrationActivityEnrollRestriction" parent="Uif-ImageField">
        <property name="cssClasses"
                  value="registrationActivity__enrollRest registrationActivity__enrollRest--@{#line.enrollmentRestriction} center"/>
        <property name="image">
            <bean parent="Uif-Image" p:source="@{#ConfigProperties['ks.myplan.externalizable.images.url']}/pixel.gif" p:altText="Add or Faculty code required" p:title="Add or Faculty code required"/>
        </property>
    </bean>

    <bean id="scheduleRegistrationActivityEnrollment" parent="KSAP-MessageField"
          p:cssClasses="registrationActivity__enrollState"
          p:messageText="[strong]@{#line.filledSeats}[/strong] / @{#line.totalSeats}"/>

    <bean id="scheduleRegistrationActivityEnrollStatus" parent="KSAP-MessageField" p:messageText="@{#line.enrollStatus}"
          p:cssClasses="registrationActivity__enrollStatus registrationActivity__enrollStatus--@{#line.enrollStatus NE null ? #line.enrollStatus.toLowerCase() : ''}"/>

    <bean id="registrationDateLink"  parent="Uif-Link">
        <property name="linkText" value="Registration deadlines"/>
        <property name="title" value="Registration deadlines"/>
        <property name="href"
                  value="http://www.washington.edu/students/reg/prior@{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToRegQtrYrParam(termId)}.html"/>
        <property name="target" value="_blank"/>
    </bean>


    <bean id="RegistrationSummary-LookupView" p:viewName="RegistrationSummary-LookupView" parent="MyPlanBaseLookupView">
        <property name="dataObjectClassName"
                  value="org.kuali.student.myplan.registration.dataobject.RegistrationTerm"/>
        <property name="viewHelperServiceClass"
                  value="org.kuali.student.myplan.registration.service.RegistrationLookupableHelperImpl"/>
        <property name="entryPageId" value="registration_summary_page"/>
        <property name="items">
            <list>
                <bean parent="KSAP-PageVerticalLayout" id="registration_summary_page">
                    <property name="items">
                        <list>
                            <bean id="registration_summary" parent="registration_summary_list"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
    
    <bean id="registration_summary_list" parent="Uif-ListCollectionGroup">
        <property name="collectionObjectClass" value="org.kuali.student.myplan.registration.dataobject.RegistrationTerm"/>
        <property name="propertyName" value="lookupResults"/>
        <property name="cssClasses" value="module registrationSummary"/>
        <property name="onDocumentReadyScript" value="
            jQuery('#registration_summary').on('PLAN_ITEM_ADDED PLAN_ITEM_DELETED SECTION_ITEM_ADDED SECTION_ITEM_DELETED', function(event, data){
                if( data.planItemType != 'wishlist' ) {
                    customRetrieveComponent('registration_summary','registration_summary','search','lookup',{viewId:'RegistrationSummary-LookupView'},null,{css:{right:'0px',top:'0px',width:'16px',height:'16px',lineHeight:'16px',border:'none'}});
                }
            });
        "/>
        <property name="layoutManager.lineGroupPrototype.validationMessages">
            <null/>
        </property>
        <property name="layoutManager.lineGroupPrototype.header">
            <bean parent="KSAP-HeaderThree" p:headerText="@{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToTermName(#line.termId)}"/>
        </property>
        <property name="items">
            <list>
                <bean parent="registration_summary_term"/>
            </list>
        </property>
    </bean>

    <bean id="registration_summary_term" parent="KSAP-VerticalFieldGroup">
        <property name="items">
            <list></list>
        </property>
        <property name="propertyReplacers">
            <list>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items" p:condition="!#line.plannedCourses">
                    <property name="replacement">
                        <list>
                            <bean parent="KSAP-Message" p:messageText="You have no scheduled courses in your plan for this quarter. Add scheduled courses and select sections to begin."
                                  p:cssClasses="block center"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items" p:condition="#line.plannedCourses AND !#line.plannedActivities">
                    <property name="replacement">
                        <list>
                            <bean parent="KSAP-Message" p:messageText="There are no sections selected for the courses in your plan. [0] or use [1] to proceed." p:cssClasses="center">
                                <property name="inlineComponents">
                                    <list>
                                        <bean parent="Uif-Link" p:linkText="Select sections" p:href="inquiry?methodToCall=start&amp;viewId=SingleTerm-InquiryView&amp;term_atp_id=@{#line.termId}"/>
                                        <bean parent="Uif-Link" p:linkText="Schedule Builder" p:href="sb?methodToCall=start&amp;viewId=ScheduleBuild-FormView&amp;pageId=schedule_build&amp;termId=@{#line.termId}&amp;requestedLearningPlanId=@{#line.learningPlanId}"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items" p:condition="#line.plannedCourses AND #line.plannedActivities AND #line.courseRegistrationCount EQ 0">
                    <property name="replacement">
                        <list>
                            <bean parent="registration_summary_num_items"/>
                            <bean parent="registration_summary_num_ready" p:cssClasses="registrationSummary__num"/>
                            <bean parent="registration_summary_num_notready" p:cssClasses="registrationSummary__num"/>
                            <bean parent="Uif-SpaceField" p:cssClasses="block center"/>
                            <bean parent="registration_summary_disabled_msg" p:messageText="Register @{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToTermName(#line.termId)}"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items" p:condition="#line.plannedCourses AND #line.plannedActivities AND #line.courseRegistrationCount GT 0 AND !#line.openForRegistration">
                    <property name="replacement">
                        <list>
                            <bean parent="registration_summary_num_items"/>
                            <bean parent="registration_summary_num_ready" p:cssClasses="registrationSummary__num"/>
                            <bean parent="registration_summary_num_notready" p:cssClasses="registrationSummary__num"/>
                            <bean parent="registration_summary_disabled_msg" p:messageText="Registration is not open"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="items" p:condition="#line.plannedCourses AND #line.plannedActivities AND #line.courseRegistrationCount GT 0 AND #line.openForRegistration">
                    <property name="replacement">
                        <list>
                            <bean parent="registration_summary_num_items"/>
                            <bean parent="registration_summary_num_ready" p:cssClasses="registrationSummary__num"/>
                            <bean parent="registration_summary_num_notready" p:cssClasses="registrationSummary__num"/>
                            <bean parent="Uif-SpaceField" p:cssClasses="block center"/>
                            <bean parent="registration_summary_view_link" p:id="openRegistration" p:linkText="Register @{T(org.kuali.student.myplan.plan.util.AtpHelper).atpIdToTermName(#line.termId)}"
                                  p:cssClasses="btn btn-primary btn-small block"
                                  p:href="registration?methodToCall=registrationDetails&amp;viewId=Registration-FormView&amp;termId=@{#line.termId}&amp;pageId=scheduleSelect&amp;requestedLearningPlanId=@{#line.requestedLearningPlanId}&amp;uniqueId=@{#line.possibleScheduleUniqueId}&amp;forRegistration=true"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="group.footer">
            <bean parent="registration_summary_message" p:id="registration_summary_message_@{#line.termId}" p:render="@{#line.errorPlannedCourses.size() GT 0}"/>
        </property>
    </bean>

    <bean id="registration_summary_num_items" parent="KSAP-Message"
          p:messageText="[strong]@{#line.plannedItemsCount}[/strong] course@{#line.plannedItemsCount EQ 1 ? '':'s'} in your plan:"/>

    <bean id="registration_summary_num_ready" parent="KSAP-Message"
          p:messageText="[strong][0][/strong] ready for registration.">
        <property name="inlineComponents">
            <list>
                <bean parent="Uif-Link" p:linkText="@{#line.courseRegistrationCount} course@{#line.courseRegistrationCount EQ 1 ? '':'s'}"
                      p:href="registration?methodToCall=registrationDetails&amp;viewId=Registration-FormView&amp;termId=@{#line.termId}&amp;pageId=scheduleView&amp;requestedLearningPlanId=@{#line.requestedLearningPlanId}&amp;uniqueId=@{#line.possibleScheduleUniqueId}&amp;forRegistration=true">
                    <property name="lightBox">
                        <bean parent="Uif-LightBox">
                            <property name="templateOptions">
                                <map merge="true">
                                    <entry key="width" value="914"/>
                                    <entry key="fitToView" value="false"/>
                                    <entry key="autoHeight" value="true"/>
                                </map>
                            </property>
                        </bean>
                    </property>
                </bean>
            </list>
        </property>
        <property name="propertyReplacers">
            <bean parent="Uif-ConditionalBeanPropertyReplacer" p:propertyName="inlineComponents" p:condition="#line.courseRegistrationCount EQ 0">
                <property name="replacement">
                    <list>
                        <bean parent="KSAP-Message" p:messageText="@{#line.courseRegistrationCount} course@{#line.courseRegistrationCount EQ 1 ? '':'s'}"/>
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="registration_summary_num_notready" parent="KSAP-Message"
          p:messageText="[strong]@{#line.errorPlannedCourses.size()} course@{#line.errorPlannedCourses.size() EQ 1 ? '':'s'}[/strong] not ready. [0]">
        <property name="inlineComponents">
            <list>
                <bean id="registration_summary_issue" parent="Uif-ActionLink" p:actionLabel="View issues">
                    <property name="render" value="@{#line.errorPlannedCourses.size() GT 0}"/>
                    <property name="actionScript" value="
                    openDialog(jQuery('#registration_summary_message_@{#line.termId}').html(), e, true);"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="registration_summary_message" p:id="registration_summary_message" parent="KSAP-VerticalBoxGroup" p:headerText="Courses Not Ready for Registration" p:hidden="true">
        <property name="header">
            <bean parent="KSAP-HeaderFour" p:cssClasses="messagesForm__header"/>
        </property>
        <property name="items">
            <list>
                <bean parent="KSAP-Message"  p:messageText="[css='registrationSummary__issue'][p]One or more of the issues below prevent us from sending your planned courses to registration:[/p][/css][ul][li]Too many/too few sections selected for a course.[/li][li]Time conflict with registered course.[/li][li]Time conflict with a selected section.[/li][/ul][p][0] to enable registration.[/p][p][color=grey]Courses Affected:[/color] @{#line.errorPlannedCourses}[/p]">
                    <property name="inlineComponents">
                        <list>
                            <bean parent="Uif-Link" p:linkText="Modify your planned sections" p:href="inquiry?methodToCall=start&amp;viewId=SingleTerm-InquiryView&amp;term_atp_id=@{#line.termId}"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean id="registration_summary_view_link" parent="Uif-Link" p:linkText="View section details"
          p:href="registration?methodToCall=registrationDetails&amp;viewId=Registration-FormView&amp;termId=@{#line.termId}&amp;pageId=scheduleView&amp;requestedLearningPlanId=@{#line.requestedLearningPlanId}&amp;uniqueId=@{#line.possibleScheduleUniqueId}&amp;forRegistration=true"
          p:cssClasses="block center">
        <property name="lightBox">
            <bean parent="Uif-LightBox">
                <property name="templateOptions">
                    <map merge="true">
                        <entry key="width" value="914"/>
                        <entry key="fitToView" value="false"/>
                        <entry key="autoHeight" value="true"/>
                    </map>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="registration_summary_disabled_msg" parent="KSAP-Message"
          p:cssClasses="btn-small registrationSummary__button registrationSummary__button--disabled"/>

</beans>
