<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    <!--
     Copyright 2007-2009 The Kuali Foundation

     Licensed under the Educational Community License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

     http://www.opensource.org/licenses/ecl2.php

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
    -->

    <bean id="CourseSections-InquiryView" parent="MyPlanBaseInquiryView">
        <property name="theme">
            <bean parent="MyPlanRetrievedTheme"/>
        </property>
        <property name="onLoadScript" value=""/>
        <property name="headerText" value="Course Sections"/>
        <property name="viewName" value="CourseSections-InquiryView"/>
        <property name="dataObjectClassName" value="org.kuali.student.myplan.course.dataobject.CourseDetails"/>
        <property name="viewHelperServiceClass"
                  value="org.kuali.student.myplan.course.service.CourseDetailsInquiryHelperImpl"/>
        <property name="page.header.render" value="false"/>
        <property name="header.render" value="false"/>
        <property name="footer.render" value="false"/>
        <property name="singlePageView" value="true"/>
        <property name="items">
            <list>
                <bean parent="Uif-Page" p:id="course_sections_page">
                    <property name="layoutManager">
                        <bean parent="Uif-VerticalBoxLayout"/>
                    </property>
                    <property name="items">
                        <list>
                            <bean p:id="@{dataObject.courseSummaryDetails.courseId}_sections_collection"
                                  parent="course_details_institution_data_single">
                                <property name="onDocumentReadyScript"
                                          value="myplanGetSectionEnrollment('/student/myplan/plan/enroll', {'courseId':'@{dataObject.courseSummaryDetails.courseId}','atpId':'@{dataObject.sectionAtp}'}, '@{dataObject.courseSummaryDetails.courseId}_sections_collection');"/>
                                <property name="render" value="true"/>
                                <property name="header.render" value="false"/>
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-MessageField" p:messageText="@{#line.name}"
                                              p:render="@{dataObject.courseOfferingInstitutionList.size() gt 1}">
                                            <property name="cssClasses">
                                                <list merge="true">
                                                    <value>activityInstitutionHeading</value>
                                                    <value>fl-text-gray</value>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                                <property name="subCollections">
                                    <list>
                                        <bean parent="course_details_term_data">
                                            <property name="subCollections">
                                                <list>
                                                    <bean parent="activityOfferingTableCollection">
                                                        <property name="id" value=""/>
                                                        <property name="layoutManager.id"
                                                                  value="@{dataObject.courseSummaryDetails.courseId}_@{#line.instituteCode}_sections"/>
                                                        <property name="propertyName" value="activityOfferingItemList"/>
                                                        <property name="onDocumentReadyScript" value="
                                                            var tableHead = jQuery('table#@{dataObject.courseSummaryDetails.courseId}_@{#line.instituteCode}_sections thead');
                                                            tableHead.before('
                                                                &lt;col style=&quot;width: 60px;&quot;&gt;
                                                                &lt;col style=&quot;width: 84px;&quot;&gt;
                                                                &lt;col style=&quot;width: 263px;&quot;&gt;
                                                                &lt;col style=&quot;width: 48px;&quot;&gt;
                                                                &lt;col style=&quot;width: 79px;&quot;&gt;
                                                                &lt;col style=&quot;width: 69px;&quot;&gt;
                                                                &lt;col style=&quot;width: 25px;&quot;&gt;
                                                            ');
                                                            tableHead.remove();
                                                        "/>
                                                        <property name="items">
                                                            <list>
                                                                <bean parent="activityCode" p:rowSpan="1">
                                                                    <property name="onDocumentReadyScript" value="
                                                                        var row = jQuery('#@{#line.atpId.replace('.','-')}-@{#line.registrationCode}').parents('tr');
                                                                        row.addClass('row');
                                                                        if (@{#line.planItemId NE null}) row.addClass('myplan-section-planned');
                                                                    "/>
                                                                    <property name="items">
                                                                        <list>
                                                                            <bean p:id="@{#line.atpId.replace('.','-')}-@{#line.registrationCode}"
                                                                                  parent="Uif-DataField"
                                                                                  p:propertyName="code"
                                                                                  p:label="Section"
                                                                                  p:style="margin:4px 0; font-size:@{#line.primary ? '24px':'22px'};">
                                                                                <property name="fieldLabel.render"
                                                                                          value="false"/>
                                                                            </bean>
                                                                            <bean parent="Uif-MessageField"
                                                                                  p:messageText="PCE"
                                                                                  p:style="margin:0; font-size:9px;"
                                                                                  p:title="UW Professional &amp; Continuing Education"
                                                                                  p:render="@{#line.instituteCode.startsWith('95') AND #line.primary}">
                                                                            </bean>
                                                                            <bean parent="Uif-ActionLink"
                                                                                  p:actionLabel="View more"
                                                                                  p:style="margin:0; font-size:9px;"
                                                                                  p:id="toggle_@{#line.atpId.replace('.','-')}-@{#line.registrationCode}">
                                                                                <property name="actionScript"
                                                                                          value="toggleSectionDetails(jQuery(this).parents('tr.row'), jQuery(this), 'View more', 'View less')"/>
                                                                            </bean>
                                                                        </list>
                                                                    </property>
                                                                </bean>

                                                                <bean parent="activityType"/>

                                                                <bean parent="activityMeetingData"/>

                                                                <bean parent="activityRegCode"/>

                                                                <bean parent="activityEnrlRestr"/>

                                                                <bean parent="activityEnrlStatus"/>

                                                                <bean parent="activityEnrlData"/>

                                                                <bean parent="activityActionButton" p:rowSpan="1"
                                                                      p:render="@{#line.openForPlanning AND #line.planItemId EQ null}">
                                                                    <property name="dataAttributes">
                                                                        <map merge="true">
                                                                            <entry key="initial" value="false"/>
                                                                        </map>
                                                                    </property>
                                                                </bean>

                                                                <bean parent="activityActionDelete" p:rowSpan="1"
                                                                      p:render="@{#line.openForPlanning AND #line.planItemId NE null}">
                                                                    <property name="dataAttributes">
                                                                        <map merge="true">
                                                                            <entry key="initial" value="false"/>
                                                                        </map>
                                                                    </property>
                                                                </bean>

                                                                <bean parent="emptyAction" p:rowSpan="1"
                                                                      p:render="@{!#line.openForPlanning}"/>

                                                                <bean parent="activityInstructor">
                                                                    <property name="onDocumentReadyScript" value="
                                                                        var collapsibleRow = jQuery('#instructor_@{#line.atpId.replace('.','-')}_@{#line.registrationCode}').parents('tr');
                                                                        collapsibleRow.addClass('collapsible').hide();
                                                                        collapsibleRow.find('.activityOther').parents('td').attr('colspan', '3');
                                                                        if (@{#line.planItemId NE null}) collapsibleRow.addClass('myplan-section-planned');
                                                                    "/>
                                                                </bean>

                                                                <bean parent="activityOther" p:colSpan="5"/>

                                                                <bean parent="activityAdditionalDetails" p:colSpan="7">
                                                                    <property name="onDocumentReadyScript" value="
                                                                        var collapsibleRow = jQuery('#details_@{#line.atpId.replace('.','-')}_@{#line.registrationCode}').parents('tr');
                                                                        collapsibleRow.addClass('collapsible').hide();
                                                                        collapsibleRow.find('.activityAdditionalDetails').parents('td').attr('colspan', '5');
                                                                        if (@{#line.planItemId NE null}) collapsibleRow.addClass('myplan-section-planned');
                                                                    "/>
                                                                </bean>

                                                            </list>
                                                        </property>
                                                        <property name="propertyReplacers">
                                                            <list>
                                                                <bean parent="Uif-ConditionalBeanPropertyReplacer"
                                                                      p:propertyName="items"
                                                                      p:condition="T(org.kuali.student.myplan.utils.UserSessionHelper).isAdviser()">
                                                                    <property name="replacement">
                                                                        <list>
                                                                            <bean parent="activityCode" p:rowSpan="1">
                                                                                <property name="onDocumentReadyScript"
                                                                                          value="
                                                                                    var row = jQuery('#@{#line.atpId.replace('.','-')}-@{#line.registrationCode}').parents('tr');
                                                                                    row.addClass('row');
                                                                                    if (@{#line.planItemId NE null}) row.addClass('myplan-section-planned');
                                                                                "/>
                                                                                <property name="items">
                                                                                    <list>
                                                                                        <bean p:id="@{#line.atpId.replace('.','-')}-@{#line.registrationCode}"
                                                                                              parent="Uif-DataField"
                                                                                              p:propertyName="code"
                                                                                              p:label="Section"
                                                                                              p:style="margin:4px 0; font-size:@{#line.primary ? '24px':'22px'};">
                                                                                            <property
                                                                                                    name="fieldLabel.render"
                                                                                                    value="false"/>
                                                                                        </bean>
                                                                                        <bean parent="Uif-MessageField"
                                                                                              p:messageText="PCE"
                                                                                              p:style="margin:0; font-size:9px;"
                                                                                              p:title="UW Professional &amp; Continuing Education"
                                                                                              p:render="@{#line.instituteCode.startsWith('95') AND #line.primary}">
                                                                                        </bean>
                                                                                        <bean parent="Uif-ActionLink"
                                                                                              p:actionLabel="View more"
                                                                                              p:style="margin:0; font-size:9px;"
                                                                                              p:id="toggle_@{#line.atpId.replace('.','-')}-@{#line.registrationCode}" p:render="@{#line.stateKey EQ 'active'}">
                                                                                            <property
                                                                                                    name="actionScript"
                                                                                                    value="toggleSectionDetails(jQuery(this).parents('tr.row'), jQuery(this), 'View more', 'View less')"/>
                                                                                        </bean>
                                                                                    </list>
                                                                                </property>
                                                                            </bean>

                                                                            <bean parent="activityType"/>

                                                                            <bean parent="activityMeetingData"/>

                                                                            <bean parent="activityRegCode"/>

                                                                            <bean parent="activityEnrlRestr"/>

                                                                            <bean parent="activityEnrlStatus"/>

                                                                            <bean parent="activityEnrlData"/>

                                                                            <bean parent="emptyAction" p:rowSpan="1"/>

                                                                            <bean parent="activityInstructor">
                                                                                <property name="onDocumentReadyScript"
                                                                                          value="
                                                                                    var collapsibleRow = jQuery('#instructor_@{#line.atpId.replace('.','-')}_@{#line.registrationCode}').parents('tr');
                                                                                    collapsibleRow.addClass('collapsible').hide();
                                                                                    collapsibleRow.find('.activityOther').parents('td').attr('colspan', '3');
                                                                                    if (@{#line.planItemId NE null}) collapsibleRow.addClass('myplan-section-planned');
                                                                                "/>
                                                                            </bean>

                                                                            <bean parent="activityOther" p:colSpan="5"/>

                                                                            <bean parent="activityAdditionalDetails"
                                                                                  p:colSpan="7">
                                                                                <property name="onDocumentReadyScript"
                                                                                          value="
                                                                                    var collapsibleRow = jQuery('#details_@{#line.atpId.replace('.','-')}_@{#line.registrationCode}').parents('tr');
                                                                                    collapsibleRow.addClass('collapsible').hide();
                                                                                    collapsibleRow.find('.activityAdditionalDetails').parents('td').attr('colspan', '5');
                                                                                    if (@{#line.planItemId NE null}) collapsibleRow.addClass('myplan-section-planned');
                                                                                "/>
                                                                            </bean>
                                                                        </list>
                                                                    </property>
                                                                </bean>
                                                            </list>
                                                        </property>
                                                    </bean>
                                                </list>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

</beans>